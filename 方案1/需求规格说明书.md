# 研发平台需求规格说明书 (SRS)

## 文档信息

| 项目 | 内容 |
|------|------|
| 文档编号 | SRS-RDP-001 |
| 版本 | 1.0.0 |
| 编写日期 | 2026-02-20 |
| 编写人 | AI Agent |
| 适用范围 | AI Agent集群实现 |

---

## 目录

1. [引言](#1-引言)
2. [总体描述](#2-总体描述)
3. [具体需求](#3-具体需求)
   - 3.1 功能需求
   - 3.2 性能需求
   - 3.3 设计约束
   - 3.4 软件系统属性
   - 3.5 接口需求
   - 3.6 数据需求
4. [附录](#4-附录)

---

## 1. 引言

### 1.1 编写目的

本文档为研发平台（R&D Platform）提供详细的需求规格说明，旨在为AI Agent集群提供可直接实现的技术指导。文档涵盖系统的功能需求、数据模型、接口规范、业务规则等各个方面，确保开发团队能够准确理解并实现系统功能。

### 1.2 项目背景

研发平台是面向微波系统研发部门的综合管理系统，支持产品管理、产品开发、技术开发三大实体团队的协同工作，以及综合管理虚拟团队的服务支撑。系统采用模块化架构设计，各核心模块可独立开发和部署。

### 1.3 术语定义

| 术语 | 英文全称 | 定义 |
|------|----------|------|
| IPD | Integrated Product Development | 集成产品开发 |
| DCP | Decision Check Point | 决策评审点 |
| CPM | Critical Path Method | 关键路径法 |
| BOM | Bill of Materials | 物料清单 |
| MES | Manufacturing Execution System | 制造执行系统 |
| ERP | Enterprise Resource Planning | 企业资源计划 |
| IPMT | Integrated Portfolio Management Team | 集成组合管理团队 |
| L1-L4 | Level 1-4 | 流程层级（1级最粗，4级最细） |
| FS/SS/FF/SF | Finish-Start/Start-Start/Finish-Finish/Start-Finish | 活动依赖关系类型 |

### 1.4 参考资料

- IEEE 830-1998 软件需求规格说明标准
- GitHub: department_homepage 项目
- GitHub: Mattermost 项目
- IPD集成产品开发流程规范

### 1.5 文档约定

- **必须(MUST)**：强制性要求
- **应该(SHOULD)**：推荐性要求
- **可以(MAY)**：可选性要求
- **[FR-XXX]**：功能需求编号
- **[DR-XXX]**：数据需求编号
- **[API-XXX]**：API接口编号

---

## 2. 总体描述

### 2.1 系统概述

研发平台是一个面向微波系统研发部门的综合管理系统，实现项目全生命周期管理、技术资产沉淀、知识共享和团队协作。系统采用Web应用形式，支持局域网离线部署。

### 2.2 组织架构

```
部门
├── 产品管理团队（实体）
│   ├── 型号管理
│   └── 可靠性管理
├── 产品开发团队（实体）
│   ├── A产品线
│   ├── B产品线
│   └── C产品线
├── 技术开发团队（实体）
│   ├── 天线设计师
│   ├── 射频设计师（接收通道、功放、频率源、变频模块）
│   ├── 数字设计师（FPGA+ADC/SDR、RFSoC）
│   └── 电源设计师（低压二次电源）
└── 综合管理虚拟团队（兼职）
    ├── 安全管理
    ├── 保密管理
    ├── 档案管理
    ├── 宣传管理
    ├── 6S管理
    └── 党建管理
```

### 2.3 用户角色体系

| 角色 | 权限范围 | 主要职责 |
|------|----------|----------|
| 系统管理员 | 全局 | 系统配置、用户管理、权限分配 |
| 部门领导 | 全局 | 审批决策、资源调配、绩效评估 |
| 团队组长 | 团队内 | 任务分配、进度跟踪、团队管理 |
| 设计师 | 项目内 | 任务执行、交付物产出、问题反馈 |
| 其他人员 | 受限 | 查看权限、参与协作 |

### 2.4 职称体系

| 级别 | 职称 | 说明 |
|------|------|------|
| 1 | 设计员 | 初级 |
| 2 | 助理工程师 | 初级 |
| 3 | 工程师 | 中级 |
| 4 | 高级工程师 | 副高级 |
| 5 | 研究员 | 正高级 |

### 2.5 项目类别体系

| 类别代码 | 类别名称 | 说明 |
|----------|----------|------|
| PDT-SINGLE | 单机开发 | 完整单机产品开发 |
| PDT-MODULE | 模块开发 | 通用模块开发 |
| PDT-SOFT | 软件开发 | 嵌入式软件等 |
| PDT-TECH | 技术开发 | 通用技术研发 |
| PDT-PROC | 流程开发 | 流程定义与优化 |
| PDT-KNOW | 知识库开发 | 知识资产沉淀 |
| PDT-SHELF | 产品上架 | 产品入库流程 |

### 2.6 系统架构

```
┌─────────────────────────────────────────────────────────────┐
│                        门户界面层                            │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ 工作台  │ │ 仪表盘  │ │ 通知中心│ │ 快捷入口│           │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
├─────────────────────────────────────────────────────────────┤
│                        应用服务层                            │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐       │
│  │ 用户管理 │ │ 项目管理 │ │ 项目开发 │ │ 产品货架 │       │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘       │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐       │
│  │ 技术货架 │ │ 知识库   │ │ 技术论坛 │ │ 即时通信 │       │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘       │
├─────────────────────────────────────────────────────────────┤
│                        核心服务层                            │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐       │
│  │ 流程引擎 │ │ 排程引擎 │ │ 文件服务 │ │ 消息服务 │       │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘       │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐       │
│  │ 搜索服务 │ │ 权限服务 │ │ 通知服务 │ │ 版本控制 │       │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘       │
├─────────────────────────────────────────────────────────────┤
│                        数据存储层                            │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐       │
│  │ 关系数据库│ │ 文档存储 │ │ 文件存储 │ │ 缓存存储 │       │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘       │
└─────────────────────────────────────────────────────────────┘
```

### 2.7 运行环境

| 组件 | 要求 |
|------|------|
| 服务器 | 支持局域网部署 |
| 数据库 | PostgreSQL 14+ / MySQL 8.0+ |
| 缓存 | Redis 6.0+ |
| 文件存储 | 本地文件系统 / NAS |
| 版本控制 | Git |
| 浏览器 | Chrome 90+, Firefox 88+, Edge 90+ |

---

## 3. 具体需求

### 3.1 功能需求

#### 3.1.1 门户界面模块

##### [FR-PORTAL-001] 部门首页展示

**功能描述**
展示部门概览信息、最新动态、快捷入口和个人工作台。

**前置条件**
- 用户已登录系统
- 用户具有访问权限

**输入**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| user_id | string | 是 | 当前用户ID |

**处理逻辑**
1. 验证用户身份和权限
2. 查询用户所属团队信息
3. 获取部门统计数据（项目数、成员数、产品数）
4. 获取用户待办事项列表
5. 获取最新通知和动态
6. 组装首页数据返回

**输出**
```json
{
  "code": 200,
  "data": {
    "department": {
      "name": "微波系统研发部",
      "member_count": 45,
      "project_count": 28,
      "product_count": 156
    },
    "user": {
      "name": "张三",
      "role": "高级工程师",
      "team": "产品开发-A产品线"
    },
    "todos": [...],
    "notifications": [...],
    "quick_links": [...]
  }
}
```

**异常处理**
| 错误码 | 描述 | 处理方案 |
|--------|------|----------|
| 401 | 未登录 | 跳转登录页 |
| 403 | 无权限 | 显示无权限提示 |

**验收标准**
- [ ] 首页加载时间 < 2秒
- [ ] 正确显示部门统计数据
- [ ] 正确显示用户个人信息
- [ ] 待办事项实时更新

---

##### [FR-PORTAL-002] 个人工作台

**功能描述**
集成各模块功能入口，提供个性化工作视图。

**前置条件**
- 用户已登录系统

**输入**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| user_id | string | 是 | 当前用户ID |
| view_type | string | 否 | 视图类型（默认/紧凑/详细） |

**处理逻辑**
1. 获取用户配置的工作台布局
2. 查询用户参与的项目列表
3. 查询用户待处理的任务
4. 查询用户收藏的文档/产品
5. 组装工作台数据

**输出**
```json
{
  "code": 200,
  "data": {
    "layout": {...},
    "my_projects": [...],
    "pending_tasks": [...],
    "favorites": [...],
    "recent_visits": [...]
  }
}
```

**验收标准**
- [ ] 支持自定义布局
- [ ] 支持拖拽调整模块位置
- [ ] 数据实时刷新

---

#### 3.1.2 用户管理模块

##### [FR-USER-001] 用户注册与登录

**功能描述**
提供用户身份认证功能，支持多种登录方式。

**前置条件**
- 系统管理员已创建用户账号 或 开放注册

**输入（登录）**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| username | string | 是 | 用户名/工号 |
| password | string | 是 | 密码 |
| captcha | string | 条件 | 验证码（失败3次后需要） |

**处理逻辑**
1. 验证请求参数完整性
2. 检查验证码（如需要）
3. 查询用户信息
4. 验证密码（bcrypt加密比对）
5. 生成JWT Token
6. 记录登录日志
7. 返回用户信息和Token

**输出**
```json
{
  "code": 200,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "expires_in": 86400,
    "user": {
      "id": "U001",
      "name": "张三",
      "avatar": "...",
      "roles": ["designer"],
      "permissions": [...]
    }
  }
}
```

**异常处理**
| 错误码 | 描述 | 处理方案 |
|--------|------|----------|
| 4001 | 用户名或密码错误 | 提示重新输入 |
| 4002 | 账号已锁定 | 联系管理员解锁 |
| 4003 | 验证码错误 | 刷新验证码 |

**验收标准**
- [ ] 登录响应时间 < 1秒
- [ ] 密码加密存储
- [ ] 支持Token自动续期
- [ ] 记录登录日志

---

##### [FR-USER-002] 用户CRUD管理

**功能描述**
管理员对用户进行增删改查操作。

**前置条件**
- 当前用户具有管理员权限

**输入（创建用户）**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| username | string | 是 | 用户名（工号） |
| name | string | 是 | 真实姓名 |
| email | string | 是 | 邮箱 |
| phone | string | 否 | 手机号 |
| team_id | string | 是 | 所属团队ID |
| position_id | string | 是 | 岗位ID |
| title_level | int | 是 | 职称级别(1-5) |
| password | string | 是 | 初始密码 |
| is_admin | boolean | 否 | 是否管理员 |

**处理逻辑**
1. 验证管理员权限
2. 检查用户名唯一性
3. 验证团队/岗位有效性
4. 密码bcrypt加密
5. 创建用户记录
6. 发送通知邮件

**输出**
```json
{
  "code": 200,
  "data": {
    "id": "U002",
    "username": "2026002",
    "name": "李四",
    "created_at": "2026-02-20T10:30:00Z"
  }
}
```

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-USER-001 | POST | /api/v1/users | 创建用户 |
| API-USER-002 | GET | /api/v1/users | 查询用户列表 |
| API-USER-003 | GET | /api/v1/users/{id} | 查询用户详情 |
| API-USER-004 | PUT | /api/v1/users/{id} | 更新用户信息 |
| API-USER-005 | DELETE | /api/v1/users/{id} | 删除用户 |
| API-USER-006 | POST | /api/v1/users/{id}/roles | 分配角色 |

**验收标准**
- [ ] 用户名全局唯一
- [ ] 支持批量导入
- [ ] 支持用户启用/禁用
- [ ] 操作记录审计日志

---

##### [FR-USER-003] 组织架构管理

**功能描述**
管理部门、团队、岗位的组织架构体系。

**数据模型**
```sql
-- 部门表
CREATE TABLE departments (
    id VARCHAR(36) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    code VARCHAR(50) UNIQUE NOT NULL,
    parent_id VARCHAR(36),
    type ENUM('entity', 'virtual') NOT NULL,
    description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (parent_id) REFERENCES departments(id)
);

-- 岗位表
CREATE TABLE positions (
    id VARCHAR(36) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    code VARCHAR(50) UNIQUE NOT NULL,
    department_id VARCHAR(36) NOT NULL,
    level INT DEFAULT 1,
    description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (department_id) REFERENCES departments(id)
);
```

**验收标准**
- [ ] 支持多级部门结构
- [ ] 支持部门合并/拆分
- [ ] 组织架构图可视化

---

##### [FR-USER-004] 个人主页

**功能描述**
展示用户个人信息、项目经历、能力图谱等。

**前置条件**
- 用户已登录

**处理逻辑**
1. 查询用户基本信息
2. 查询用户参与的项目历史
3. 统计用户贡献数据
4. 生成能力雷达图数据
5. 查询近期平台使用记录

**输出**
```json
{
  "code": 200,
  "data": {
    "profile": {
      "id": "U001",
      "name": "张三",
      "avatar": "...",
      "title": "高级工程师",
      "team": "产品开发-A产品线",
      "position": "射频设计师",
      "join_date": "2020-03-15"
    },
    "statistics": {
      "project_count": 15,
      "completed_tasks": 128,
      "deliverables": 256,
      "contribution_score": 892
    },
    "skills": {
      "射频设计": 90,
      "电路仿真": 85,
      "项目管理": 75,
      "文档编写": 80
    },
    "projects": [...],
    "honors": [...],
    "activity_heatmap": [...]
  }
}
```

**验收标准**
- [ ] 页面加载时间 < 2秒
- [ ] 能力图谱可视化
- [ ] 项目经历可筛选
- [ ] 支持导出个人报告

---

#### 3.1.3 项目管理模块

##### [FR-PROJ-001] 五步项目创建向导

**功能描述**
通过五步向导引导用户完成项目创建。

**步骤1：基础信息录入**

**输入**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| name | string | 是 | 项目名称（2-100字符） |
| description | string | 否 | 项目描述 |
| start_date | date | 是 | 计划开始日期 |
| end_date | date | 是 | 计划结束日期 |
| budget | decimal | 否 | 预算金额（万元） |
| priority | enum | 是 | 优先级：high/medium/low |

**处理逻辑**
1. 验证项目名称唯一性
2. 验证日期逻辑（结束>开始）
3. 自动生成项目代号
4. 保存草稿状态

**输出**
```json
{
  "code": 200,
  "data": {
    "draft_id": "DRAFT-001",
    "project_code": "PRJ-2026-001",
    "next_step": 2
  }
}
```

**步骤2：项目类别选择**

**输入**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| draft_id | string | 是 | 草稿ID |
| category_code | string | 是 | 类别代码 |

**处理逻辑**
1. 获取项目类别列表
2. 根据类别推荐默认流程模板
3. 显示类别特征说明

**输出**
```json
{
  "code": 200,
  "data": {
    "category": {
      "code": "PDT-SINGLE",
      "name": "单机开发",
      "description": "完整单机产品开发流程"
    },
    "recommended_templates": [...]
  }
}
```

**步骤3：流程模板绑定**

**输入**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| draft_id | string | 是 | 草稿ID |
| template_id | string | 是 | 流程模板ID |

**处理逻辑**
1. 获取流程模板详情
2. 可视化预览流程图
3. 支持模板参数配置

**输出**
```json
{
  "code": 200,
  "data": {
    "template": {
      "id": "TPL-001",
      "name": "标准单机开发流程",
      "activities_count": 15,
      "estimated_duration": 180
    },
    "flow_chart": {...}
  }
}
```

**步骤4：团队成员分配**

**输入**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| draft_id | string | 是 | 草稿ID |
| product_owner_id | string | 是 | 产品负责人ID |
| project_manager_id | string | 是 | 项目负责人ID |
| tech_lead_id | string | 是 | 技术负责人ID |
| members | array | 否 | 其他成员列表 |

**处理逻辑**
1. 从组织架构选择人员
2. 校验关键角色完整性
3. 检查人员可用性

**输出**
```json
{
  "code": 200,
  "data": {
    "team": {
      "product_owner": {...},
      "project_manager": {...},
      "tech_lead": {...},
      "members": [...]
    }
  }
}
```

**步骤5：创建确认执行**

**输入**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| draft_id | string | 是 | 草稿ID |
| confirm | boolean | 是 | 确认创建 |

**处理逻辑**
1. 汇总展示配置信息
2. 用户确认
3. 创建项目记录
4. 初始化流程实例
5. 调用自动排程引擎
6. 创建本地文件夹
7. 发送启动通知

**输出**
```json
{
  "code": 200,
  "data": {
    "project_id": "PRJ-2026-001",
    "project_code": "PRJ-2026-001",
    "status": "created",
    "schedule": {...},
    "folder_path": "/projects/PRJ-2026-001"
  }
}
```

**验收标准**
- [ ] 五步流程完整可执行
- [ ] 支持中途保存草稿
- [ ] 每步数据验证完整
- [ ] 创建成功发送通知

---

##### [FR-PROJ-002] 自动排程引擎

**功能描述**
基于CPM关键路径法自动生成项目计划。

**输入**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| project_id | string | 是 | 项目ID |
| activities | array | 是 | 活动列表 |
| constraints | object | 否 | 约束条件 |

**活动数据结构**
```json
{
  "id": "ACT-001",
  "name": "需求分析",
  "duration": 10,
  "predecessors": [],
  "dependency_type": "FS",
  "resources": ["U001", "U002"],
  "resource_hours": {"U001": 80, "U002": 40}
}
```

**处理逻辑（CPM算法）**
1. 构建活动网络图
2. 正向遍历计算最早开始/结束时间
3. 反向遍历计算最晚开始/结束时间
4. 计算总浮动时间
5. 识别关键路径
6. 检查资源冲突
7. 应用资源平衡
8. 生成甘特图数据

**输出**
```json
{
  "code": 200,
  "data": {
    "schedule": {
      "start_date": "2026-03-01",
      "end_date": "2026-08-28",
      "duration": 130
    },
    "critical_path": ["ACT-001", "ACT-003", "ACT-007"],
    "activities": [
      {
        "id": "ACT-001",
        "es": "2026-03-01",
        "ef": "2026-03-10",
        "ls": "2026-03-01",
        "lf": "2026-03-10",
        "tf": 0,
        "is_critical": true
      }
    ],
    "resource_load": {...}
  }
}
```

**异常处理**
| 错误码 | 描述 | 处理方案 |
|--------|------|----------|
| 5001 | 循环依赖 | 提示检查活动依赖关系 |
| 5002 | 资源冲突 | 提供冲突报告和解决方案 |
| 5003 | 工期不可行 | 建议调整约束条件 |

**验收标准**
- [ ] CPM算法正确计算关键路径
- [ ] 支持四种依赖类型（FS/SS/FF/SF）
- [ ] 资源冲突检测准确
- [ ] 排程时间 < 5秒（100个活动）

---

##### [FR-PROJ-003] 甘特图管理

**功能描述**
提供交互式甘特图展示和编辑功能。

**功能特性**
- 时间轴缩放（日/周/月视图）
- 任务拖拽调整
- 依赖关系编辑
- 关键路径高亮
- 资源负载热力图
- 进度跟踪

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-PROJ-010 | GET | /api/v1/projects/{id}/gantt | 获取甘特图数据 |
| API-PROJ-011 | PUT | /api/v1/projects/{id}/gantt | 更新甘特图 |
| API-PROJ-012 | POST | /api/v1/projects/{id}/gantt/export | 导出到MS Project |
| API-PROJ-013 | POST | /api/v1/projects/{id}/gantt/import | 从MS Project导入 |

**验收标准**
- [ ] 支持日/周/月视图切换
- [ ] 任务可拖拽调整
- [ ] 支持导出MS Project格式
- [ ] 支持导入MS Project格式

---

##### [FR-PROJ-004] 项目仪表盘

**功能描述**
多维度展示项目状态指标。

**展示维度**
| 维度 | 指标 |
|------|------|
| 进度 | 整体进度、阶段进度、活动完成率 |
| 成本 | 预算执行、工时消耗、成本偏差 |
| 质量 | 缺陷数、评审通过率、交付物质量 |
| 风险 | 风险数量、风险等级、应对措施 |

**输出**
```json
{
  "code": 200,
  "data": {
    "overview": {
      "status": "on_track",
      "progress": 65,
      "health_score": 85
    },
    "schedule": {
      "planned_end": "2026-08-28",
      "forecast_end": "2026-08-30",
      "variance": 2
    },
    "cost": {
      "budget": 100,
      "actual": 58,
      "forecast": 95,
      "cpi": 1.02
    },
    "charts": {
      "progress_trend": [...],
      "resource_load": [...],
      "risk_matrix": [...]
    }
  }
}
```

**验收标准**
- [ ] 数据实时更新
- [ ] 超期自动提醒
- [ ] 支持钻取详情
- [ ] 图表可导出

---

##### [FR-PROJ-005] 项目文件夹管理

**功能描述**
管理项目本地文件夹，支持版本控制。

**处理逻辑**
1. 项目创建时自动生成标准化目录结构
2. 支持配置存储位置
3. 集成Git版本控制
4. 支持本地-服务器同步

**目录结构模板**
```
/PRJ-{CODE}
├── 01-项目管理
│   ├── 项目计划
│   ├── 会议纪要
│   └── 项目报告
├── 02-需求分析
│   ├── 需求规格
│   └── 需求跟踪
├── 03-设计开发
│   ├── 方案设计
│   ├── 详细设计
│   ├── 仿真分析
│   └── 设计评审
├── 04-实现测试
│   ├── 图纸文件
│   ├── 工艺文件
│   ├── 测试报告
│   └── 试验数据
├── 05-交付验收
│   ├── 交付清单
│   ├── 验收报告
│   └── 用户文档
└── 06-项目总结
    ├── 技术总结
    ├── 经验总结
    └── 知识沉淀
```

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-PROJ-020 | POST | /api/v1/projects/{id}/folders/init | 初始化文件夹 |
| API-PROJ-021 | GET | /api/v1/projects/{id}/folders | 获取文件夹结构 |
| API-PROJ-022 | POST | /api/v1/projects/{id}/folders/sync | 同步文件夹 |
| API-PROJ-023 | GET | /api/v1/projects/{id}/git/status | 获取Git状态 |
| API-PROJ-024 | POST | /api/v1/projects/{id}/git/commit | Git提交 |

**验收标准**
- [ ] 自动生成标准目录
- [ ] 支持Git版本控制
- [ ] 支持本地-服务器同步
- [ ] 文件变更实时检测


#### 3.1.4 项目开发模块

##### [FR-DEV-001] 流程可视化执行

**功能描述**
图形化展示项目开发流程，支持活动节点交互。

**前置条件**
- 项目已创建并初始化流程
- 用户具有项目访问权限

**处理逻辑**
1. 获取项目流程实例
2. 获取活动节点状态
3. 渲染流程图（当前活动高亮）
4. 支持节点点击查看详情

**输出**
```json
{
  "code": 200,
  "data": {
    "flow_instance": {
      "id": "FI-001",
      "template_id": "TPL-001",
      "status": "running"
    },
    "activities": [
      {
        "id": "ACT-001",
        "name": "需求分析",
        "status": "completed",
        "progress": 100,
        "start_date": "2026-03-01",
        "end_date": "2026-03-10"
      },
      {
        "id": "ACT-002",
        "name": "方案设计",
        "status": "in_progress",
        "progress": 60,
        "start_date": "2026-03-11",
        "assignee": "U001"
      }
    ],
    "flow_chart": {
      "nodes": [...],
      "edges": [...]
    }
  }
}
```

**验收标准**
- [ ] 流程图清晰可读
- [ ] 当前活动高亮显示
- [ ] 节点可点击查看详情
- [ ] 支持流程缩放/平移

---

##### [FR-DEV-002] 任务执行面板

**功能描述**
提供任务认领、执行、提交、确认的完整闭环。

**任务状态流转**
```
待开始 → 已认领 → 执行中 → 待审核 → 已完成
           ↓        ↓        ↓
         已暂停   已退回   已驳回
```

**输入（任务认领）**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| activity_id | string | 是 | 活动ID |
| user_id | string | 是 | 认领用户ID |

**输入（任务完成）**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| activity_id | string | 是 | 活动ID |
| progress | int | 是 | 完成进度(0-100) |
| deliverables | array | 条件 | 交付物列表 |
| notes | string | 否 | 完成备注 |

**处理逻辑**
1. 验证任务状态
2. 检查输入交付物完整性
3. 更新任务进度
4. 保存交付物信息
5. 触发Git提交
6. 更新项目进度
7. 触发下一活动（如完成）

**输出**
```json
{
  "code": 200,
  "data": {
    "activity": {
      "id": "ACT-002",
      "status": "completed",
      "completed_at": "2026-03-20T15:30:00Z",
      "next_activity": "ACT-003"
    }
  }
}
```

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-DEV-001 | POST | /api/v1/activities/{id}/claim | 认领任务 |
| API-DEV-002 | PUT | /api/v1/activities/{id}/progress | 更新进度 |
| API-DEV-003 | POST | /api/v1/activities/{id}/complete | 完成任务 |
| API-DEV-004 | POST | /api/v1/activities/{id}/deliverables | 上传交付物 |

**验收标准**
- [ ] 任务状态流转正确
- [ ] 交付物上传成功
- [ ] Git提交自动触发
- [ ] 进度更新实时同步

---

##### [FR-DEV-003] 交付物管理

**功能描述**
管理活动交付物，支持多种文件类型和编辑方式。

**交付物类型**
| 类型 | 扩展名 | 编辑方式 |
|------|--------|----------|
| 文档 | .md, .docx | Markdown在线/调用Obsidian |
| 原理图 | .schdoc | 调用Altium Designer |
| PCB | .pcbdoc | 调用Altium Designer |
| 仿真 | .vbs, .cst | 调用对应仿真软件 |
| 图纸 | .dwg, .prt | 调用CAD/NX |
| 通用 | 其他 | 本地下载/上传 |

**处理逻辑**
1. 根据活动获取交付物模板
2. 用户点击模板调用本地软件
3. 本地编辑完成后保存
4. 自动Git提交
5. 生成Web预览格式
6. 同步到服务器

**输入（上传交付物）**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| activity_id | string | 是 | 活动ID |
| file | file | 是 | 文件 |
| type | string | 是 | 交付物类型 |
| description | string | 否 | 描述 |

**输出**
```json
{
  "code": 200,
  "data": {
    "deliverable": {
      "id": "DEL-001",
      "name": "需求规格说明书.md",
      "path": "/projects/PRJ-001/02-需求分析/需求规格说明书.md",
      "size": 10240,
      "version": "v1.0",
      "created_at": "2026-03-05T10:00:00Z"
    }
  }
}
```

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-DEV-010 | GET | /api/v1/activities/{id}/templates | 获取交付物模板 |
| API-DEV-011 | POST | /api/v1/activities/{id}/deliverables | 上传交付物 |
| API-DEV-012 | GET | /api/v1/deliverables/{id} | 获取交付物 |
| API-DEV-013 | GET | /api/v1/deliverables/{id}/preview | 预览交付物 |
| API-DEV-014 | GET | /api/v1/deliverables/{id}/versions | 获取版本历史 |

**验收标准**
- [ ] 支持多种文件类型
- [ ] 支持本地软件调用
- [ ] 支持在线预览
- [ ] 版本控制完整

---

##### [FR-DEV-004] 问题与决策管理

**功能描述**
管理项目中的问题和决策评审点。

**问题升级机制**
| 级别 | 处理人 | 问题类型 | 升级条件 |
|------|--------|----------|----------|
| L1 | 活动负责人 | 一般技术问题 | 默认级别 |
| L2 | 项目负责人 | 资源冲突、进度风险 | 24小时未解决 |
| L3 | 部门领导/IPMT | 重大变更、方向决策 | 48小时未解决 |

**问题数据结构**
```json
{
  "id": "ISS-001",
  "title": "需求变更申请",
  "description": "客户提出新的性能指标要求",
  "type": "requirement_change",
  "priority": "high",
  "level": 2,
  "status": "open",
  "reporter": "U001",
  "assignee": "U002",
  "created_at": "2026-03-15T10:00:00Z",
  "due_date": "2026-03-17T10:00:00Z"
}
```

**DCP决策评审点**

**处理逻辑**
1. DCP节点完成后自动锁定流程
2. 汇总评审材料
3. 触发评审流程
4. 评审专家在线会签
5. 记录评审结论（Go/Kill/Redirect/Hold）
6. 根据结论决定流程走向

**评审结论**
| 结论 | 说明 | 后续动作 |
|------|------|----------|
| Go | 通过，继续执行 | 解锁流程，继续下一活动 |
| Kill | 终止项目 | 触发项目终止流程 |
| Redirect | 方向调整 | 返回修改，重新评审 |
| Hold | 暂停 | 等待条件满足 |

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-DEV-020 | POST | /api/v1/projects/{id}/issues | 创建问题 |
| API-DEV-021 | GET | /api/v1/projects/{id}/issues | 查询问题列表 |
| API-DEV-022 | PUT | /api/v1/issues/{id} | 更新问题 |
| API-DEV-023 | POST | /api/v1/issues/{id}/escalate | 升级问题 |
| API-DEV-024 | POST | /api/v1/dcp/{id}/review | DCP评审 |

**验收标准**
- [ ] 三级升级机制正确执行
- [ ] DCP评审流程完整
- [ ] 评审结论正确触发后续流程
- [ ] 问题通知多渠道触达

---

##### [FR-DEV-005] 项目收尾

**功能描述**
完成项目收尾，触发后续流程。

**完成条件校验**
| 条件 | 说明 |
|------|------|
| 活动完成 | 全部活动达到完成状态 |
| 交付物齐全 | 关键交付物已上传 |
| 问题关闭 | 开放问题已关闭或转移 |
| 总结报告 | 项目总结报告已提交 |
| 经验录入 | 经验教训已录入知识库 |

**后续流程触发**
| 项目类型 | 触发流程 |
|----------|----------|
| 单机开发 | 批产流程、上货架流程 |
| 模块开发 | 上货架流程 |
| 技术开发 | 技术入库流程 |
| 流程开发 | 流程发布流程 |
| 知识开发 | 知识发布流程 |

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-DEV-030 | POST | /api/v1/projects/{id}/complete | 完成项目 |
| API-DEV-031 | GET | /api/v1/projects/{id}/completion-check | 完成条件检查 |

**验收标准**
- [ ] 完成条件校验完整
- [ ] 后续流程正确触发
- [ ] 项目状态正确更新

---

#### 3.1.5 产品货架模块

##### [FR-SHELF-001] 产品分类浏览

**功能描述**
分类展示已上架的产品。

**产品分类**
| 一级分类 | 二级分类 | 说明 |
|----------|----------|------|
| 单机 | A产品、B产品、C产品 | 完整单机产品 |
| 模块 | 天线、射频、数字、电源 | 可复用模块 |
| 软件 | 嵌入式软件、测试软件 | 软件产品 |
| 基础 | 元器件、标准件、原材料 | 基础物料 |

**输入**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| category | string | 否 | 分类筛选 |
| keyword | string | 否 | 关键词搜索 |
| sort_by | string | 否 | 排序方式 |
| page | int | 否 | 页码 |
| page_size | int | 否 | 每页数量 |

**输出**
```json
{
  "code": 200,
  "data": {
    "total": 156,
    "items": [
      {
        "id": "PROD-001",
        "name": "X波段接收模块",
        "category": "模块/射频",
        "image": "...",
        "maturity_level": 5,
        "application_count": 12,
        "rating": 4.8
      }
    ]
  }
}
```

**验收标准**
- [ ] 分类浏览清晰
- [ ] 支持多维度筛选
- [ ] 搜索结果准确

---

##### [FR-SHELF-002] 产品详情展示

**功能描述**
展示产品的详细信息。

**展示内容**
| 模块 | 内容 |
|------|------|
| 基本信息 | 名称、型号、分类、成熟度 |
| 产品介绍 | 功能描述、技术指标 |
| 图片展示 | 产品图片、结构图 |
| 测试数据 | 性能测试报告、试验数据 |
| 应用履历 | 应用项目列表、应用效果 |
| 问题记录 | 应用问题、批产问题 |
| 项目信息 | 开发人员、开发时间 |
| 文件下载 | 全套资料下载 |

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-SHELF-001 | GET | /api/v1/products | 查询产品列表 |
| API-SHELF-002 | GET | /api/v1/products/{id} | 获取产品详情 |
| API-SHELF-003 | POST | /api/v1/products/{id}/download | 下载产品资料 |

**验收标准**
- [ ] 信息展示完整
- [ ] 图片可放大查看
- [ ] 文件可下载

---

##### [FR-SHELF-003] 产品选用

**功能描述**
设计师选用产品货架中的产品。

**处理逻辑**
1. 浏览产品货架
2. 选择需要的产品
3. 加入项目"购物车"
4. 一键申请集成
5. 技术支持对接
6. 应用效果追踪

**输入**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| product_id | string | 是 | 产品ID |
| project_id | string | 是 | 项目ID |
| quantity | int | 是 | 数量 |
| notes | string | 否 | 备注 |

**输出**
```json
{
  "code": 200,
  "data": {
    "selection_id": "SEL-001",
    "status": "pending_approval",
    "message": "选用申请已提交，等待审批"
  }
}
```

**验收标准**
- [ ] 选用流程完整
- [ ] 审批流程正确
- [ ] 选用记录可追溯

---

##### [FR-SHELF-004] 产品版本管理

**功能描述**
管理产品的版本历史和变更。

**功能特性**
- 版本历史追溯
- 变更影响分析
- 替代关系维护
- 相似创建新项目

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-SHELF-010 | GET | /api/v1/products/{id}/versions | 获取版本历史 |
| API-SHELF-011 | POST | /api/v1/products/{id}/fork | 基于产品创建新项目 |

**验收标准**
- [ ] 版本历史完整
- [ ] 变更可追溯
- [ ] 支持派生新项目

---

#### 3.1.6 技术货架模块

##### [FR-TECH-001] 技术树展示

**功能描述**
以技术树形式展示部门技术能力。

**技术分类**
| 一级 | 二级 | 三级 |
|------|------|------|
| 设计技术 | 集成技术 | 系统架构、指标分解 |
| | 天线技术 | 阵列天线、反射面天线 |
| | 射频技术 | 接收通道、功放、频率源 |
| | 数字技术 | FPGA设计、信号处理 |
| | 电源技术 | 二次电源、电源管理 |
| | 软件技术 | 嵌入式开发、驱动开发 |
| 试验技术 | 环境试验 | 振动、冲击、温度 |
| | 电磁兼容 | EMI、EMC测试 |
| | 性能测试 | 射频指标、数字指标 |
| 仿真技术 | 电磁仿真 | HFSS、CST |
| | 热仿真 | Icepak、Flotherm |
| | 结构仿真 | ANSYS Mechanical |

**输出**
```json
{
  "code": 200,
  "data": {
    "tech_tree": {
      "id": "ROOT",
      "name": "技术体系",
      "children": [
        {
          "id": "TECH-001",
          "name": "设计技术",
          "children": [...]
        }
      ]
    },
    "stats": {
      "total_techs": 45,
      "mature_techs": 32,
      "developing_techs": 13
    }
  }
}
```

**验收标准**
- [ ] 技术树结构清晰
- [ ] 支持展开/折叠
- [ ] 点击可查看详情

---

##### [FR-TECH-002] 技术详情管理

**功能描述**
管理技术的详细信息和相关文件。

**展示内容**
| 模块 | 内容 |
|------|------|
| 技术概述 | 技术原理、应用场景 |
| 技术文档 | 设计指南、应用案例 |
| 相关项目 | 应用该技术的历史项目 |
| 技术成熟度 | TRL等级评估 |
| 文件下载 | 技术资料下载 |

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-TECH-001 | GET | /api/v1/technologies | 查询技术列表 |
| API-TECH-002 | GET | /api/v1/technologies/{id} | 获取技术详情 |
| API-TECH-003 | POST | /api/v1/technologies | 创建技术条目 |
| API-TECH-004 | PUT | /api/v1/technologies/{id} | 更新技术信息 |

**验收标准**
- [ ] 技术信息完整
- [ ] 支持技术创建/更新
- [ ] 支持技术迭代

---

#### 3.1.7 知识库模块

##### [FR-KB-001] 知识分类体系

**功能描述**
建立完整的知识分类体系。

**知识分类**
| 一级分类 | 二级分类 | 内容示例 |
|----------|----------|----------|
| 理论知识 | 电子书 | 数学、物理、电磁场、电路 |
| | 论文专利 | 探测、通信、天线、射频 |
| | 专业知识 | 党建知识、航天精神、PCB设计 |
| 标准规范 | 国家标准 | 国标、国军标 |
| | 行业标准 | 航天标准、行业标准 |
| | 部门标准 | 部门规范、设计准则 |
| 制度文件 | 质量体系 | 质量手册、程序文件 |
| | 管理制度 | 公司制度、部门制度 |
| 流程说明 | L1流程 | 产品管理流程 |
| | L2流程 | 产品开发流程 |
| | L3流程 | 详细流程 |
| | L4流程 | 具体活动 |
| 案例库 | 正面案例 | 优秀设计案例 |
| | 反面案例 | 质量问题案例 |
| 仿真模型 | ANSYS模型 | 热、力、电磁场 |
| | CST模型 | 电磁场、天线 |
| 软件指南 | 设计软件 | Altium、Cadence、NX |
| | 仿真软件 | ANSYS、CST、MATLAB |
| | 办公软件 | Office系列 |

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-KB-001 | GET | /api/v1/knowledge/categories | 获取分类列表 |
| API-KB-002 | GET | /api/v1/knowledge | 查询知识条目 |

**验收标准**
- [ ] 分类体系完整
- [ ] 支持多级分类
- [ ] 分类可扩展

---

##### [FR-KB-002] 知识检索

**功能描述**
提供全文搜索和智能推荐功能。

**搜索功能**
- 全文搜索
- 分类筛选
- 标签筛选
- 高级搜索（作者、日期、类型）
- 搜索结果排序

**输入**
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| keyword | string | 条件 | 关键词 |
| category | string | 否 | 分类筛选 |
| tags | array | 否 | 标签筛选 |
| author | string | 否 | 作者筛选 |
| date_from | date | 否 | 开始日期 |
| date_to | date | 否 | 结束日期 |
| sort | string | 否 | 排序方式 |

**输出**
```json
{
  "code": 200,
  "data": {
    "total": 256,
    "items": [
      {
        "id": "KNW-001",
        "title": "射频电路设计指南",
        "category": "理论知识/专业知识",
        "author": "张三",
        "summary": "本文介绍了射频电路设计的基本方法和注意事项...",
        "tags": ["射频", "电路设计"],
        "created_at": "2025-06-15"
      }
    ]
  }
}
```

**验收标准**
- [ ] 搜索响应时间 < 1秒
- [ ] 搜索结果相关性高
- [ ] 支持高亮显示

---

##### [FR-KB-003] 外部工具集成

**功能描述**
集成Obsidian和Zotero工具。

**集成功能**
- 引用Obsidian文件和分类
- 引用Zotero文献库
- 文件路径与Web项目路径一致
- 双向同步

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-KB-010 | GET | /api/v1/knowledge/obsidian/sync | 同步Obsidian |
| API-KB-011 | GET | /api/v1/knowledge/zotero/sync | 同步Zotero |

**验收标准**
- [ ] Obsidian集成正常
- [ ] Zotero集成正常
- [ ] 同步功能稳定

---

#### 3.1.8 技术论坛模块

##### [FR-FORUM-001] 论坛基础功能

**功能描述**
提供技术交流论坛功能。

**功能列表**
| 功能 | 说明 |
|------|------|
| 版块管理 | 按技术领域划分版块 |
| 发帖 | 支持Markdown格式 |
| 回帖 | 支持引用、@用户 |
| 搜索 | 帖子搜索 |
| 收藏 | 收藏有用帖子 |
| 点赞 | 点赞功能 |
| 置顶 | 管理员置顶 |
| 精华 | 标记精华帖 |

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-FORUM-001 | GET | /api/v1/forum/boards | 获取版块列表 |
| API-FORUM-002 | GET | /api/v1/forum/boards/{id}/topics | 获取主题列表 |
| API-FORUM-003 | POST | /api/v1/forum/topics | 创建主题 |
| API-FORUM-004 | GET | /api/v1/forum/topics/{id} | 获取主题详情 |
| API-FORUM-005 | POST | /api/v1/forum/topics/{id}/replies | 回复主题 |

**验收标准**
- [ ] 发帖功能正常
- [ ] 回帖功能正常
- [ ] 搜索功能正常

---

#### 3.1.9 即时通信模块

##### [FR-IM-001] 即时通信功能

**功能描述**
提供类似Mattermost的即时通信功能。

**功能列表**
| 功能 | 说明 |
|------|------|
| 单聊 | 一对一聊天 |
| 群聊 | 多人聊天组 |
| 频道 | 按主题/团队划分频道 |
| 消息 | 文本、图片、文件 |
| 历史记录 | 消息历史查询 |
| 通知 | 新消息提醒 |
| 在线状态 | 显示用户在线状态 |
| 已读回执 | 消息已读状态 |

**消息数据结构**
```json
{
  "id": "MSG-001",
  "channel_id": "CH-001",
  "sender_id": "U001",
  "type": "text",
  "content": "大家好",
  "mentions": [],
  "created_at": "2026-02-20T10:30:00Z",
  "read_by": ["U002", "U003"]
}
```

**API规范**
| 接口 | 方法 | 路径 | 描述 |
|------|------|------|------|
| API-IM-001 | GET | /api/v1/im/channels | 获取频道列表 |
| API-IM-002 | POST | /api/v1/im/channels | 创建频道 |
| API-IM-003 | GET | /api/v1/im/channels/{id}/messages | 获取消息 |
| API-IM-004 | POST | /api/v1/im/channels/{id}/messages | 发送消息 |
| API-IM-005 | WS | /ws/im | WebSocket连接 |

**验收标准**
- [ ] 消息实时推送
- [ ] 支持多种消息类型
- [ ] 历史记录可查询

---


### 3.2 性能需求

#### 3.2.1 响应时间要求

| 操作类型 | 目标响应时间 | 最大响应时间 |
|----------|--------------|--------------|
| 页面加载 | < 2秒 | < 5秒 |
| 数据查询 | < 1秒 | < 3秒 |
| 数据提交 | < 2秒 | < 5秒 |
| 文件上传 | < 5秒/MB | < 10秒/MB |
| 搜索响应 | < 1秒 | < 3秒 |
| 报表生成 | < 10秒 | < 30秒 |
| 甘特图渲染 | < 3秒 | < 5秒 |
| 流程图渲染 | < 2秒 | < 4秒 |

#### 3.2.2 并发处理能力

| 指标 | 要求 |
|------|------|
| 在线用户数 | 支持500+用户同时在线 |
| 并发操作 | 支持100+用户同时操作 |
| 消息推送 | 支持1000+消息/秒 |
| 文件上传 | 支持50+并发上传 |

#### 3.2.3 数据处理能力

| 指标 | 要求 |
|------|------|
| 数据库存储 | 支持100万+项目记录 |
| 文件存储 | 支持10TB+文件存储 |
| 搜索索引 | 支持100万+文档索引 |
| 日志存储 | 支持1年日志保留 |

#### 3.2.4 可用性要求

| 指标 | 要求 |
|------|------|
| 系统可用性 | ≥ 99.5% |
| 计划停机 | 每月 ≤ 4小时 |
| 故障恢复 | ≤ 30分钟 |
| 数据备份 | 每日全量备份 |

---

### 3.3 设计约束

#### 3.3.1 技术约束

| 约束项 | 要求 |
|--------|------|
| 部署环境 | 支持局域网离线部署 |
| 浏览器兼容 | Chrome 90+, Firefox 88+, Edge 90+ |
| 移动端支持 | 响应式设计，支持平板访问 |
| 数据库 | PostgreSQL 14+ / MySQL 8.0+ |
| 缓存 | Redis 6.0+ |
| 消息队列 | RabbitMQ / Redis |
| 版本控制 | Git |

#### 3.3.2 安全约束

| 约束项 | 要求 |
|--------|------|
| 身份认证 | JWT Token认证 |
| 密码策略 | 最小8位，包含大小写+数字 |
| 传输安全 | HTTPS/TLS加密 |
| 会话管理 | Token有效期24小时 |
| 权限控制 | RBAC权限模型 |
| 审计日志 | 记录所有关键操作 |
| 数据加密 | 敏感数据加密存储 |

#### 3.3.3 集成约束

| 约束项 | 要求 |
|--------|------|
| Obsidian | 支持本地Obsidian文件引用 |
| Zotero | 支持Zotero文献库集成 |
| Git | 支持Git版本控制 |
| MS Project | 支持导入/导出MS Project文件 |
| 本地软件 | 支持调用本地设计软件 |

---

### 3.4 软件系统属性

#### 3.4.1 可靠性

| 属性 | 要求 |
|------|------|
| 数据一致性 | 事务处理保证数据一致性 |
| 容错处理 | 关键操作支持重试机制 |
| 数据校验 | 输入数据完整性校验 |
| 异常处理 | 完善的异常捕获和处理 |

#### 3.4.2 可维护性

| 属性 | 要求 |
|------|------|
| 代码规范 | 遵循团队编码规范 |
| 文档完整 | 代码注释和文档完整 |
| 日志记录 | 关键操作记录日志 |
| 配置管理 | 支持配置文件化管理 |

#### 3.4.3 可扩展性

| 属性 | 要求 |
|------|------|
| 模块化设计 | 各模块可独立开发部署 |
| 插件机制 | 支持功能插件扩展 |
| API版本 | 支持API版本管理 |
| 流程定制 | 支持流程模板自定义 |

#### 3.4.4 可移植性

| 属性 | 要求 |
|------|------|
| 容器化 | 支持Docker容器化部署 |
| 跨平台 | 支持Linux/Windows服务器 |
| 数据库 | 支持多种数据库切换 |

---

### 3.5 接口需求

#### 3.5.1 用户接口

**Web界面**
- 响应式设计，适配不同屏幕尺寸
- 支持中文界面
- 操作反馈及时明确
- 支持键盘快捷键

**本地软件调用**
- 通过URL Scheme调用本地软件
- 支持Altium Designer
- 支持ANSYS/CST
- 支持NX/AutoCAD
- 支持Obsidian

#### 3.5.2 硬件接口

| 接口类型 | 说明 |
|----------|------|
| 存储接口 | 支持NAS/本地磁盘 |
| 网络接口 | 以太网，支持千兆网络 |
| 显示接口 | 支持高分辨率显示器 |

#### 3.5.3 软件接口

| 接口类型 | 说明 |
|----------|------|
| 数据库接口 | JDBC/ODBC |
| 缓存接口 | Redis协议 |
| 消息接口 | WebSocket/HTTP |
| 文件接口 | REST API |
| Git接口 | Git命令行/libgit2 |

#### 3.5.4 通信接口

| 接口类型 | 说明 |
|----------|------|
| HTTP/HTTPS | RESTful API |
| WebSocket | 实时通信 |
| SMTP | 邮件通知 |

---

### 3.6 数据需求

#### 3.6.1 数据模型设计

##### 用户相关表

```sql
-- ============================================
-- 用户表 (users)
-- ============================================
CREATE TABLE users (
    id VARCHAR(36) PRIMARY KEY COMMENT '用户ID',
    username VARCHAR(50) NOT NULL UNIQUE COMMENT '用户名/工号',
    password VARCHAR(255) NOT NULL COMMENT '密码(加密)',
    name VARCHAR(100) NOT NULL COMMENT '真实姓名',
    email VARCHAR(100) NOT NULL COMMENT '邮箱',
    phone VARCHAR(20) COMMENT '手机号',
    avatar VARCHAR(255) COMMENT '头像URL',
    department_id VARCHAR(36) COMMENT '所属部门ID',
    position_id VARCHAR(36) COMMENT '岗位ID',
    title_level TINYINT DEFAULT 1 COMMENT '职称级别(1-5)',
    status TINYINT DEFAULT 1 COMMENT '状态(0禁用,1启用)',
    is_admin BOOLEAN DEFAULT FALSE COMMENT '是否管理员',
    last_login_at TIMESTAMP COMMENT '最后登录时间',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    
    INDEX idx_department (department_id),
    INDEX idx_position (position_id),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户表';

-- ============================================
-- 部门表 (departments)
-- ============================================
CREATE TABLE departments (
    id VARCHAR(36) PRIMARY KEY COMMENT '部门ID',
    name VARCHAR(100) NOT NULL COMMENT '部门名称',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '部门编码',
    parent_id VARCHAR(36) COMMENT '父部门ID',
    type ENUM('entity', 'virtual') NOT NULL COMMENT '类型(实体/虚拟)',
    description TEXT COMMENT '描述',
    sort_order INT DEFAULT 0 COMMENT '排序',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    
    INDEX idx_parent (parent_id),
    INDEX idx_type (type),
    FOREIGN KEY (parent_id) REFERENCES departments(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='部门表';

-- ============================================
-- 岗位表 (positions)
-- ============================================
CREATE TABLE positions (
    id VARCHAR(36) PRIMARY KEY COMMENT '岗位ID',
    name VARCHAR(100) NOT NULL COMMENT '岗位名称',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '岗位编码',
    department_id VARCHAR(36) NOT NULL COMMENT '所属部门ID',
    level INT DEFAULT 1 COMMENT '级别',
    description TEXT COMMENT '描述',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    INDEX idx_department (department_id),
    FOREIGN KEY (department_id) REFERENCES departments(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='岗位表';

-- ============================================
-- 角色表 (roles)
-- ============================================
CREATE TABLE roles (
    id VARCHAR(36) PRIMARY KEY COMMENT '角色ID',
    name VARCHAR(100) NOT NULL COMMENT '角色名称',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '角色编码',
    description TEXT COMMENT '描述',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    INDEX idx_code (code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='角色表';

-- ============================================
-- 用户角色关联表 (user_roles)
-- ============================================
CREATE TABLE user_roles (
    id VARCHAR(36) PRIMARY KEY COMMENT 'ID',
    user_id VARCHAR(36) NOT NULL COMMENT '用户ID',
    role_id VARCHAR(36) NOT NULL COMMENT '角色ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    UNIQUE KEY uk_user_role (user_id, role_id),
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户角色关联表';

-- ============================================
-- 权限表 (permissions)
-- ============================================
CREATE TABLE permissions (
    id VARCHAR(36) PRIMARY KEY COMMENT '权限ID',
    name VARCHAR(100) NOT NULL COMMENT '权限名称',
    code VARCHAR(100) NOT NULL UNIQUE COMMENT '权限编码',
    resource VARCHAR(100) NOT NULL COMMENT '资源',
    action VARCHAR(50) NOT NULL COMMENT '操作',
    description TEXT COMMENT '描述',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='权限表';

-- ============================================
-- 角色权限关联表 (role_permissions)
-- ============================================
CREATE TABLE role_permissions (
    id VARCHAR(36) PRIMARY KEY COMMENT 'ID',
    role_id VARCHAR(36) NOT NULL COMMENT '角色ID',
    permission_id VARCHAR(36) NOT NULL COMMENT '权限ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    UNIQUE KEY uk_role_permission (role_id, permission_id),
    FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE CASCADE,
    FOREIGN KEY (permission_id) REFERENCES permissions(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='角色权限关联表';
```

##### 项目相关表

```sql
-- ============================================
-- 项目表 (projects)
-- ============================================
CREATE TABLE projects (
    id VARCHAR(36) PRIMARY KEY COMMENT '项目ID',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '项目编码',
    name VARCHAR(200) NOT NULL COMMENT '项目名称',
    description TEXT COMMENT '项目描述',
    category_code VARCHAR(50) NOT NULL COMMENT '项目类别代码',
    status VARCHAR(50) NOT NULL DEFAULT 'draft' COMMENT '状态',
    priority VARCHAR(20) DEFAULT 'medium' COMMENT '优先级',
    
    -- 时间
    planned_start_date DATE COMMENT '计划开始日期',
    planned_end_date DATE COMMENT '计划结束日期',
    actual_start_date DATE COMMENT '实际开始日期',
    actual_end_date DATE COMMENT '实际结束日期',
    
    -- 成本
    budget DECIMAL(15,2) COMMENT '预算(万元)',
    actual_cost DECIMAL(15,2) DEFAULT 0 COMMENT '实际成本',
    
    -- 进度
    progress TINYINT DEFAULT 0 COMMENT '进度(0-100)',
    
    -- 负责人
    product_owner_id VARCHAR(36) COMMENT '产品负责人ID',
    project_manager_id VARCHAR(36) COMMENT '项目负责人ID',
    tech_lead_id VARCHAR(36) COMMENT '技术负责人ID',
    
    -- 流程
    flow_template_id VARCHAR(36) COMMENT '流程模板ID',
    flow_instance_id VARCHAR(36) COMMENT '流程实例ID',
    
    -- 文件夹
    folder_path VARCHAR(500) COMMENT '文件夹路径',
    
    -- 排程
    schedule_data JSON COMMENT '排程数据',
    critical_path JSON COMMENT '关键路径',
    
    created_by VARCHAR(36) COMMENT '创建人ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    
    INDEX idx_category (category_code),
    INDEX idx_status (status),
    INDEX idx_product_owner (product_owner_id),
    INDEX idx_project_manager (project_manager_id),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='项目表';

-- ============================================
-- 项目成员表 (project_members)
-- ============================================
CREATE TABLE project_members (
    id VARCHAR(36) PRIMARY KEY COMMENT 'ID',
    project_id VARCHAR(36) NOT NULL COMMENT '项目ID',
    user_id VARCHAR(36) NOT NULL COMMENT '用户ID',
    role VARCHAR(50) NOT NULL COMMENT '角色',
    join_date DATE COMMENT '加入日期',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    UNIQUE KEY uk_project_user (project_id, user_id),
    FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='项目成员表';

-- ============================================
-- 项目类别表 (project_categories)
-- ============================================
CREATE TABLE project_categories (
    id VARCHAR(36) PRIMARY KEY COMMENT 'ID',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '类别代码',
    name VARCHAR(100) NOT NULL COMMENT '类别名称',
    description TEXT COMMENT '描述',
    default_template_id VARCHAR(36) COMMENT '默认模板ID',
    icon VARCHAR(100) COMMENT '图标',
    sort_order INT DEFAULT 0 COMMENT '排序',
    is_active BOOLEAN DEFAULT TRUE COMMENT '是否启用',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='项目类别表';

-- ============================================
-- 流程模板表 (flow_templates)
-- ============================================
CREATE TABLE flow_templates (
    id VARCHAR(36) PRIMARY KEY COMMENT '模板ID',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '模板编码',
    name VARCHAR(100) NOT NULL COMMENT '模板名称',
    category_code VARCHAR(50) NOT NULL COMMENT '适用类别',
    description TEXT COMMENT '描述',
    version VARCHAR(20) DEFAULT '1.0' COMMENT '版本',
    is_default BOOLEAN DEFAULT FALSE COMMENT '是否默认',
    is_active BOOLEAN DEFAULT TRUE COMMENT '是否启用',
    definition JSON NOT NULL COMMENT '流程定义',
    created_by VARCHAR(36) COMMENT '创建人ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    
    INDEX idx_category (category_code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='流程模板表';

-- ============================================
-- 流程实例表 (flow_instances)
-- ============================================
CREATE TABLE flow_instances (
    id VARCHAR(36) PRIMARY KEY COMMENT '实例ID',
    template_id VARCHAR(36) NOT NULL COMMENT '模板ID',
    project_id VARCHAR(36) NOT NULL COMMENT '项目ID',
    status VARCHAR(50) NOT NULL DEFAULT 'running' COMMENT '状态',
    current_activity_id VARCHAR(36) COMMENT '当前活动ID',
    started_at TIMESTAMP COMMENT '开始时间',
    completed_at TIMESTAMP COMMENT '完成时间',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    FOREIGN KEY (template_id) REFERENCES flow_templates(id),
    FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='流程实例表';

-- ============================================
-- 活动定义表 (activity_definitions)
-- ============================================
CREATE TABLE activity_definitions (
    id VARCHAR(36) PRIMARY KEY COMMENT '活动定义ID',
    template_id VARCHAR(36) NOT NULL COMMENT '模板ID',
    code VARCHAR(50) NOT NULL COMMENT '活动编码',
    name VARCHAR(100) NOT NULL COMMENT '活动名称',
    description TEXT COMMENT '描述',
    type VARCHAR(50) DEFAULT 'normal' COMMENT '类型(normal/dcp/milestone)',
    duration INT DEFAULT 1 COMMENT '工期(天)',
    predecessors JSON COMMENT '前置活动',
    deliverables_template JSON COMMENT '交付物模板',
    checklist JSON COMMENT '检查清单',
    sort_order INT DEFAULT 0 COMMENT '排序',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    FOREIGN KEY (template_id) REFERENCES flow_templates(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='活动定义表';

-- ============================================
-- 活动实例表 (activity_instances)
-- ============================================
CREATE TABLE activity_instances (
    id VARCHAR(36) PRIMARY KEY COMMENT '活动实例ID',
    definition_id VARCHAR(36) NOT NULL COMMENT '定义ID',
    flow_instance_id VARCHAR(36) NOT NULL COMMENT '流程实例ID',
    project_id VARCHAR(36) NOT NULL COMMENT '项目ID',
    status VARCHAR(50) NOT NULL DEFAULT 'pending' COMMENT '状态',
    
    -- 时间
    planned_start_date DATE COMMENT '计划开始日期',
    planned_end_date DATE COMMENT '计划结束日期',
    actual_start_date DATE COMMENT '实际开始日期',
    actual_end_date DATE COMMENT '实际结束日期',
    
    -- 执行人
    assignee_id VARCHAR(36) COMMENT '执行人ID',
    claimed_at TIMESTAMP COMMENT '认领时间',
    
    -- 进度
    progress TINYINT DEFAULT 0 COMMENT '进度(0-100)',
    
    -- DCP相关
    is_dcp BOOLEAN DEFAULT FALSE COMMENT '是否DCP节点',
    review_result VARCHAR(20) COMMENT '评审结果',
    
    notes TEXT COMMENT '备注',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    
    INDEX idx_flow (flow_instance_id),
    INDEX idx_project (project_id),
    INDEX idx_status (status),
    INDEX idx_assignee (assignee_id),
    FOREIGN KEY (definition_id) REFERENCES activity_definitions(id),
    FOREIGN KEY (flow_instance_id) REFERENCES flow_instances(id) ON DELETE CASCADE,
    FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE,
    FOREIGN KEY (assignee_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='活动实例表';

-- ============================================
-- 交付物表 (deliverables)
-- ============================================
CREATE TABLE deliverables (
    id VARCHAR(36) PRIMARY KEY COMMENT '交付物ID',
    activity_id VARCHAR(36) NOT NULL COMMENT '活动ID',
    project_id VARCHAR(36) NOT NULL COMMENT '项目ID',
    name VARCHAR(200) NOT NULL COMMENT '名称',
    type VARCHAR(50) NOT NULL COMMENT '类型',
    file_path VARCHAR(500) COMMENT '文件路径',
    file_size BIGINT COMMENT '文件大小',
    file_hash VARCHAR(64) COMMENT '文件哈希',
    version VARCHAR(20) DEFAULT '1.0' COMMENT '版本',
    description TEXT COMMENT '描述',
    uploaded_by VARCHAR(36) COMMENT '上传人ID',
    uploaded_at TIMESTAMP COMMENT '上传时间',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    INDEX idx_activity (activity_id),
    INDEX idx_project (project_id),
    FOREIGN KEY (activity_id) REFERENCES activity_instances(id) ON DELETE CASCADE,
    FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE,
    FOREIGN KEY (uploaded_by) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='交付物表';

-- ============================================
-- 问题表 (issues)
-- ============================================
CREATE TABLE issues (
    id VARCHAR(36) PRIMARY KEY COMMENT '问题ID',
    project_id VARCHAR(36) NOT NULL COMMENT '项目ID',
    activity_id VARCHAR(36) COMMENT '活动ID',
    title VARCHAR(200) NOT NULL COMMENT '标题',
    description TEXT COMMENT '描述',
    type VARCHAR(50) NOT NULL COMMENT '类型',
    priority VARCHAR(20) DEFAULT 'medium' COMMENT '优先级',
    level TINYINT DEFAULT 1 COMMENT '升级级别',
    status VARCHAR(50) DEFAULT 'open' COMMENT '状态',
    reporter_id VARCHAR(36) NOT NULL COMMENT '报告人ID',
    assignee_id VARCHAR(36) COMMENT '处理人ID',
    due_date DATE COMMENT '截止日期',
    resolved_at TIMESTAMP COMMENT '解决时间',
    resolution TEXT COMMENT '解决方案',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    
    INDEX idx_project (project_id),
    INDEX idx_status (status),
    INDEX idx_assignee (assignee_id),
    FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE,
    FOREIGN KEY (reporter_id) REFERENCES users(id),
    FOREIGN KEY (assignee_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='问题表';
```

##### 产品货架相关表

```sql
-- ============================================
-- 产品表 (products)
-- ============================================
CREATE TABLE products (
    id VARCHAR(36) PRIMARY KEY COMMENT '产品ID',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '产品编码',
    name VARCHAR(200) NOT NULL COMMENT '产品名称',
    category_id VARCHAR(36) NOT NULL COMMENT '分类ID',
    description TEXT COMMENT '描述',
    
    -- 技术参数
    specifications JSON COMMENT '技术规格',
    
    -- 成熟度
    maturity_level TINYINT DEFAULT 1 COMMENT '成熟度等级(1-9)',
    trl_level TINYINT COMMENT 'TRL等级',
    
    -- 来源
    source_project_id VARCHAR(36) COMMENT '来源项目ID',
    source_type VARCHAR(50) COMMENT '来源类型',
    
    -- 统计
    application_count INT DEFAULT 0 COMMENT '应用次数',
    rating DECIMAL(2,1) DEFAULT 5.0 COMMENT '评分',
    
    -- 文件
    document_path VARCHAR(500) COMMENT '文档路径',
    images JSON COMMENT '图片列表',
    
    -- 负责人
    owner_id VARCHAR(36) COMMENT '产品负责人ID',
    
    status VARCHAR(50) DEFAULT 'active' COMMENT '状态',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    
    INDEX idx_category (category_id),
    INDEX idx_status (status),
    INDEX idx_maturity (maturity_level)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='产品表';

-- ============================================
-- 产品分类表 (product_categories)
-- ============================================
CREATE TABLE product_categories (
    id VARCHAR(36) PRIMARY KEY COMMENT '分类ID',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '分类编码',
    name VARCHAR(100) NOT NULL COMMENT '分类名称',
    parent_id VARCHAR(36) COMMENT '父分类ID',
    level TINYINT DEFAULT 1 COMMENT '层级',
    description TEXT COMMENT '描述',
    icon VARCHAR(100) COMMENT '图标',
    sort_order INT DEFAULT 0 COMMENT '排序',
    is_active BOOLEAN DEFAULT TRUE COMMENT '是否启用',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    INDEX idx_parent (parent_id),
    FOREIGN KEY (parent_id) REFERENCES product_categories(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='产品分类表';

-- ============================================
-- 产品版本表 (product_versions)
-- ============================================
CREATE TABLE product_versions (
    id VARCHAR(36) PRIMARY KEY COMMENT '版本ID',
    product_id VARCHAR(36) NOT NULL COMMENT '产品ID',
    version VARCHAR(20) NOT NULL COMMENT '版本号',
    changes TEXT COMMENT '变更说明',
    document_path VARCHAR(500) COMMENT '文档路径',
    created_by VARCHAR(36) COMMENT '创建人ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    UNIQUE KEY uk_product_version (product_id, version),
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='产品版本表';

-- ============================================
-- 产品选用记录表 (product_selections)
-- ============================================
CREATE TABLE product_selections (
    id VARCHAR(36) PRIMARY KEY COMMENT '选用ID',
    product_id VARCHAR(36) NOT NULL COMMENT '产品ID',
    project_id VARCHAR(36) NOT NULL COMMENT '项目ID',
    user_id VARCHAR(36) NOT NULL COMMENT '选用人ID',
    quantity INT DEFAULT 1 COMMENT '数量',
    notes TEXT COMMENT '备注',
    status VARCHAR(50) DEFAULT 'pending' COMMENT '状态',
    approved_by VARCHAR(36) COMMENT '审批人ID',
    approved_at TIMESTAMP COMMENT '审批时间',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    FOREIGN KEY (product_id) REFERENCES products(id),
    FOREIGN KEY (project_id) REFERENCES projects(id),
    FOREIGN KEY (user_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='产品选用记录表';
```

##### 技术货架相关表

```sql
-- ============================================
-- 技术表 (technologies)
-- ============================================
CREATE TABLE technologies (
    id VARCHAR(36) PRIMARY KEY COMMENT '技术ID',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '技术编码',
    name VARCHAR(200) NOT NULL COMMENT '技术名称',
    category_id VARCHAR(36) NOT NULL COMMENT '分类ID',
    description TEXT COMMENT '描述',
    
    -- 技术详情
    principle TEXT COMMENT '技术原理',
    application_scenarios TEXT COMMENT '应用场景',
    advantages TEXT COMMENT '技术优势',
    limitations TEXT COMMENT '技术局限',
    
    -- 成熟度
    maturity_level TINYINT DEFAULT 1 COMMENT '成熟度等级',
    trl_level TINYINT COMMENT 'TRL等级',
    
    -- 来源
    source_project_id VARCHAR(36) COMMENT '来源项目ID',
    
    -- 文件
    document_path VARCHAR(500) COMMENT '文档路径',
    
    -- 负责人
    owner_id VARCHAR(36) COMMENT '技术负责人ID',
    
    status VARCHAR(50) DEFAULT 'active' COMMENT '状态',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    
    INDEX idx_category (category_id),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='技术表';

-- ============================================
-- 技术分类表 (technology_categories)
-- ============================================
CREATE TABLE technology_categories (
    id VARCHAR(36) PRIMARY KEY COMMENT '分类ID',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '分类编码',
    name VARCHAR(100) NOT NULL COMMENT '分类名称',
    parent_id VARCHAR(36) COMMENT '父分类ID',
    level TINYINT DEFAULT 1 COMMENT '层级',
    description TEXT COMMENT '描述',
    sort_order INT DEFAULT 0 COMMENT '排序',
    is_active BOOLEAN DEFAULT TRUE COMMENT '是否启用',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    INDEX idx_parent (parent_id),
    FOREIGN KEY (parent_id) REFERENCES technology_categories(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='技术分类表';
```

##### 知识库相关表

```sql
-- ============================================
-- 知识条目表 (knowledge_items)
-- ============================================
CREATE TABLE knowledge_items (
    id VARCHAR(36) PRIMARY KEY COMMENT '知识ID',
    title VARCHAR(300) NOT NULL COMMENT '标题',
    category_id VARCHAR(36) NOT NULL COMMENT '分类ID',
    content TEXT COMMENT '内容',
    summary TEXT COMMENT '摘要',
    
    -- 来源
    source_type VARCHAR(50) COMMENT '来源类型',
    source_path VARCHAR(500) COMMENT '来源路径',
    external_id VARCHAR(100) COMMENT '外部ID(Obsidian/Zotero)',
    
    -- 作者
    author_id VARCHAR(36) COMMENT '作者ID',
    author_name VARCHAR(100) COMMENT '作者名',
    
    -- 标签
    tags JSON COMMENT '标签列表',
    
    -- 文件
    attachments JSON COMMENT '附件列表',
    
    -- 统计
    view_count INT DEFAULT 0 COMMENT '浏览次数',
    download_count INT DEFAULT 0 COMMENT '下载次数',
    
    status VARCHAR(50) DEFAULT 'published' COMMENT '状态',
    published_at TIMESTAMP COMMENT '发布时间',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    
    INDEX idx_category (category_id),
    INDEX idx_status (status),
    INDEX idx_author (author_id),
    FULLTEXT INDEX idx_title_content (title, content)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='知识条目表';

-- ============================================
-- 知识分类表 (knowledge_categories)
-- ============================================
CREATE TABLE knowledge_categories (
    id VARCHAR(36) PRIMARY KEY COMMENT '分类ID',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '分类编码',
    name VARCHAR(100) NOT NULL COMMENT '分类名称',
    parent_id VARCHAR(36) COMMENT '父分类ID',
    level TINYINT DEFAULT 1 COMMENT '层级',
    description TEXT COMMENT '描述',
    icon VARCHAR(100) COMMENT '图标',
    sort_order INT DEFAULT 0 COMMENT '排序',
    is_active BOOLEAN DEFAULT TRUE COMMENT '是否启用',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    INDEX idx_parent (parent_id),
    FOREIGN KEY (parent_id) REFERENCES knowledge_categories(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='知识分类表';
```

##### 论坛相关表

```sql
-- ============================================
-- 论坛版块表 (forum_boards)
-- ============================================
CREATE TABLE forum_boards (
    id VARCHAR(36) PRIMARY KEY COMMENT '版块ID',
    name VARCHAR(100) NOT NULL COMMENT '版块名称',
    description TEXT COMMENT '描述',
    icon VARCHAR(100) COMMENT '图标',
    sort_order INT DEFAULT 0 COMMENT '排序',
    is_active BOOLEAN DEFAULT TRUE COMMENT '是否启用',
    topic_count INT DEFAULT 0 COMMENT '主题数',
    post_count INT DEFAULT 0 COMMENT '帖子数',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='论坛版块表';

-- ============================================
-- 论坛主题表 (forum_topics)
-- ============================================
CREATE TABLE forum_topics (
    id VARCHAR(36) PRIMARY KEY COMMENT '主题ID',
    board_id VARCHAR(36) NOT NULL COMMENT '版块ID',
    title VARCHAR(200) NOT NULL COMMENT '标题',
    content TEXT NOT NULL COMMENT '内容',
    author_id VARCHAR(36) NOT NULL COMMENT '作者ID',
    
    -- 统计
    view_count INT DEFAULT 0 COMMENT '浏览次数',
    reply_count INT DEFAULT 0 COMMENT '回复数',
    like_count INT DEFAULT 0 COMMENT '点赞数',
    
    -- 状态
    is_pinned BOOLEAN DEFAULT FALSE COMMENT '是否置顶',
    is_essence BOOLEAN DEFAULT FALSE COMMENT '是否精华',
    is_locked BOOLEAN DEFAULT FALSE COMMENT '是否锁定',
    status VARCHAR(50) DEFAULT 'active' COMMENT '状态',
    
    last_reply_at TIMESTAMP COMMENT '最后回复时间',
    last_reply_by VARCHAR(36) COMMENT '最后回复人ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    
    INDEX idx_board (board_id),
    INDEX idx_author (author_id),
    INDEX idx_created_at (created_at),
    FOREIGN KEY (board_id) REFERENCES forum_boards(id),
    FOREIGN KEY (author_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='论坛主题表';

-- ============================================
-- 论坛回复表 (forum_replies)
-- ============================================
CREATE TABLE forum_replies (
    id VARCHAR(36) PRIMARY KEY COMMENT '回复ID',
    topic_id VARCHAR(36) NOT NULL COMMENT '主题ID',
    parent_id VARCHAR(36) COMMENT '父回复ID（楼中楼）',
    content TEXT NOT NULL COMMENT '内容',
    author_id VARCHAR(36) NOT NULL COMMENT '作者ID',
    like_count INT DEFAULT 0 COMMENT '点赞数',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    INDEX idx_topic (topic_id),
    INDEX idx_author (author_id),
    FOREIGN KEY (topic_id) REFERENCES forum_topics(id) ON DELETE CASCADE,
    FOREIGN KEY (author_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='论坛回复表';
```

##### 即时通信相关表

```sql
-- ============================================
-- 通信频道表 (im_channels)
-- ============================================
CREATE TABLE im_channels (
    id VARCHAR(36) PRIMARY KEY COMMENT '频道ID',
    name VARCHAR(100) NOT NULL COMMENT '频道名称',
    type ENUM('direct', 'group', 'public') NOT NULL COMMENT '类型',
    description TEXT COMMENT '描述',
    avatar VARCHAR(255) COMMENT '头像',
    creator_id VARCHAR(36) COMMENT '创建人ID',
    member_count INT DEFAULT 0 COMMENT '成员数',
    last_message_at TIMESTAMP COMMENT '最后消息时间',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    INDEX idx_type (type),
    INDEX idx_creator (creator_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='通信频道表';

-- ============================================
-- 频道成员表 (im_channel_members)
-- ============================================
CREATE TABLE im_channel_members (
    id VARCHAR(36) PRIMARY KEY COMMENT 'ID',
    channel_id VARCHAR(36) NOT NULL COMMENT '频道ID',
    user_id VARCHAR(36) NOT NULL COMMENT '用户ID',
    role ENUM('owner', 'admin', 'member') DEFAULT 'member' COMMENT '角色',
    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '加入时间',
    last_read_at TIMESTAMP COMMENT '最后阅读时间',
    
    UNIQUE KEY uk_channel_user (channel_id, user_id),
    FOREIGN KEY (channel_id) REFERENCES im_channels(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='频道成员表';

-- ============================================
-- 消息表 (im_messages)
-- ============================================
CREATE TABLE im_messages (
    id VARCHAR(36) PRIMARY KEY COMMENT '消息ID',
    channel_id VARCHAR(36) NOT NULL COMMENT '频道ID',
    sender_id VARCHAR(36) NOT NULL COMMENT '发送人ID',
    type ENUM('text', 'image', 'file', 'system') DEFAULT 'text' COMMENT '类型',
    content TEXT NOT NULL COMMENT '内容',
    attachments JSON COMMENT '附件',
    mentions JSON COMMENT '@用户列表',
    is_edited BOOLEAN DEFAULT FALSE COMMENT '是否编辑',
    edited_at TIMESTAMP COMMENT '编辑时间',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    INDEX idx_channel (channel_id),
    INDEX idx_sender (sender_id),
    INDEX idx_created_at (created_at),
    FOREIGN KEY (channel_id) REFERENCES im_channels(id) ON DELETE CASCADE,
    FOREIGN KEY (sender_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='消息表';

-- ============================================
-- 消息已读记录表 (im_message_reads)
-- ============================================
CREATE TABLE im_message_reads (
    id VARCHAR(36) PRIMARY KEY COMMENT 'ID',
    message_id VARCHAR(36) NOT NULL COMMENT '消息ID',
    user_id VARCHAR(36) NOT NULL COMMENT '用户ID',
    read_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '阅读时间',
    
    UNIQUE KEY uk_message_user (message_id, user_id),
    FOREIGN KEY (message_id) REFERENCES im_messages(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='消息已读记录表';
```

##### 系统相关表

```sql
-- ============================================
-- 通知表 (notifications)
-- ============================================
CREATE TABLE notifications (
    id VARCHAR(36) PRIMARY KEY COMMENT '通知ID',
    user_id VARCHAR(36) NOT NULL COMMENT '接收人ID',
    type VARCHAR(50) NOT NULL COMMENT '类型',
    title VARCHAR(200) NOT NULL COMMENT '标题',
    content TEXT COMMENT '内容',
    data JSON COMMENT '附加数据',
    is_read BOOLEAN DEFAULT FALSE COMMENT '是否已读',
    read_at TIMESTAMP COMMENT '阅读时间',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    INDEX idx_user (user_id),
    INDEX idx_is_read (is_read),
    INDEX idx_created_at (created_at),
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='通知表';

-- ============================================
-- 操作日志表 (operation_logs)
-- ============================================
CREATE TABLE operation_logs (
    id VARCHAR(36) PRIMARY KEY COMMENT '日志ID',
    user_id VARCHAR(36) COMMENT '用户ID',
    username VARCHAR(50) COMMENT '用户名',
    module VARCHAR(50) COMMENT '模块',
    action VARCHAR(50) COMMENT '操作',
    resource_type VARCHAR(50) COMMENT '资源类型',
    resource_id VARCHAR(36) COMMENT '资源ID',
    request_method VARCHAR(10) COMMENT '请求方法',
    request_url VARCHAR(500) COMMENT '请求URL',
    request_params TEXT COMMENT '请求参数',
    response_code INT COMMENT '响应码',
    ip_address VARCHAR(50) COMMENT 'IP地址',
    user_agent VARCHAR(500) COMMENT 'User-Agent',
    duration_ms INT COMMENT '执行时长(ms)',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    
    INDEX idx_user (user_id),
    INDEX idx_module (module),
    INDEX idx_action (action),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='操作日志表';

-- ============================================
-- 系统配置表 (system_configs)
-- ============================================
CREATE TABLE system_configs (
    id VARCHAR(36) PRIMARY KEY COMMENT '配置ID',
    config_key VARCHAR(100) NOT NULL UNIQUE COMMENT '配置键',
    config_value TEXT COMMENT '配置值',
    description TEXT COMMENT '描述',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='系统配置表';
```

---

#### 3.6.2 数据字典

##### 项目状态

| 代码 | 名称 | 说明 |
|------|------|------|
| draft | 草稿 | 项目创建中 |
| created | 已创建 | 项目已创建，待启动 |
| running | 进行中 | 项目正常执行 |
| paused | 已暂停 | 项目暂停 |
| completed | 已完成 | 项目正常完成 |
| cancelled | 已取消 | 项目取消 |

##### 活动状态

| 代码 | 名称 | 说明 |
|------|------|------|
| pending | 待开始 | 等待前置活动完成 |
| ready | 就绪 | 可以开始执行 |
| claimed | 已认领 | 已被认领 |
| in_progress | 进行中 | 正在执行 |
| reviewing | 审核中 | 等待审核 |
| completed | 已完成 | 活动完成 |
| paused | 已暂停 | 活动暂停 |
| returned | 已退回 | 审核退回 |

##### 问题状态

| 代码 | 名称 | 说明 |
|------|------|------|
| open | 待处理 | 问题待处理 |
| in_progress | 处理中 | 正在处理 |
| resolved | 已解决 | 问题已解决 |
| closed | 已关闭 | 问题已关闭 |
| escalated | 已升级 | 问题已升级 |

##### 优先级

| 代码 | 名称 | 说明 |
|------|------|------|
| critical | 紧急 | 最高优先级 |
| high | 高 | 高优先级 |
| medium | 中 | 中等优先级 |
| low | 低 | 低优先级 |

---


## 4. 附录

### 附录A：完整API接口规范

#### A.1 认证相关接口

| 接口ID | 方法 | 路径 | 描述 |
|--------|------|------|------|
| AUTH-001 | POST | /api/v1/auth/login | 用户登录 |
| AUTH-002 | POST | /api/v1/auth/logout | 用户登出 |
| AUTH-003 | POST | /api/v1/auth/refresh | 刷新Token |
| AUTH-004 | GET | /api/v1/auth/me | 获取当前用户信息 |
| AUTH-005 | PUT | /api/v1/auth/password | 修改密码 |

**登录接口详细规范**

请求：
```http
POST /api/v1/auth/login
Content-Type: application/json

{
  "username": "2026001",
  "password": "encrypted_password",
  "captcha": "1234"
}
```

响应：
```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "refresh_token": "eyJhbGciOiJIUzI1NiIs...",
    "expires_in": 86400,
    "user": {
      "id": "U001",
      "username": "2026001",
      "name": "张三",
      "avatar": "https://...",
      "roles": ["designer", "project_manager"],
      "permissions": ["project:read", "project:write"]
    }
  }
}
```

#### A.2 用户管理接口

| 接口ID | 方法 | 路径 | 描述 |
|--------|------|------|------|
| USER-001 | POST | /api/v1/users | 创建用户 |
| USER-002 | GET | /api/v1/users | 查询用户列表 |
| USER-003 | GET | /api/v1/users/{id} | 获取用户详情 |
| USER-004 | PUT | /api/v1/users/{id} | 更新用户信息 |
| USER-005 | DELETE | /api/v1/users/{id} | 删除用户 |
| USER-006 | POST | /api/v1/users/{id}/roles | 分配角色 |
| USER-007 | GET | /api/v1/users/{id}/profile | 获取个人主页 |
| USER-008 | GET | /api/v1/users/{id}/projects | 获取用户项目 |
| USER-009 | GET | /api/v1/users/{id}/activities | 获取用户活动 |
| USER-010 | GET | /api/v1/departments | 获取部门列表 |
| USER-011 | POST | /api/v1/departments | 创建部门 |
| USER-012 | GET | /api/v1/positions | 获取岗位列表 |

**创建用户接口详细规范**

请求：
```http
POST /api/v1/users
Authorization: Bearer {token}
Content-Type: application/json

{
  "username": "2026002",
  "name": "李四",
  "email": "lisi@company.com",
  "phone": "13800138000",
  "department_id": "DEPT-001",
  "position_id": "POS-001",
  "title_level": 3,
  "password": "initial_password",
  "is_admin": false
}
```

响应：
```json
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "id": "U002",
    "username": "2026002",
    "name": "李四",
    "created_at": "2026-02-20T10:30:00Z"
  }
}
```

#### A.3 项目管理接口

| 接口ID | 方法 | 路径 | 描述 |
|--------|------|------|------|
| PROJ-001 | POST | /api/v1/projects | 创建项目（向导第1步） |
| PROJ-002 | GET | /api/v1/project-categories | 获取项目类别 |
| PROJ-003 | POST | /api/v1/projects/{id}/category | 设置项目类别（向导第2步） |
| PROJ-004 | GET | /api/v1/flow-templates | 获取流程模板 |
| PROJ-005 | POST | /api/v1/projects/{id}/flow-template | 绑定流程模板（向导第3步） |
| PROJ-006 | POST | /api/v1/projects/{id}/team | 分配团队成员（向导第4步） |
| PROJ-007 | POST | /api/v1/projects/{id}/confirm | 确认创建（向导第5步） |
| PROJ-008 | GET | /api/v1/projects | 查询项目列表 |
| PROJ-009 | GET | /api/v1/projects/{id} | 获取项目详情 |
| PROJ-010 | PUT | /api/v1/projects/{id} | 更新项目信息 |
| PROJ-011 | DELETE | /api/v1/projects/{id} | 删除项目 |
| PROJ-012 | POST | /api/v1/projects/{id}/schedule | 执行自动排程 |
| PROJ-013 | GET | /api/v1/projects/{id}/gantt | 获取甘特图数据 |
| PROJ-014 | PUT | /api/v1/projects/{id}/gantt | 更新甘特图 |
| PROJ-015 | POST | /api/v1/projects/{id}/gantt/export | 导出MS Project |
| PROJ-016 | POST | /api/v1/projects/{id}/gantt/import | 导入MS Project |
| PROJ-017 | GET | /api/v1/projects/{id}/dashboard | 获取项目仪表盘 |
| PROJ-018 | POST | /api/v1/projects/{id}/folders/init | 初始化项目文件夹 |
| PROJ-019 | GET | /api/v1/projects/{id}/folders | 获取文件夹结构 |
| PROJ-020 | POST | /api/v1/projects/{id}/folders/sync | 同步文件夹 |
| PROJ-021 | GET | /api/v1/projects/{id}/git/status | 获取Git状态 |
| PROJ-022 | POST | /api/v1/projects/{id}/git/commit | Git提交 |
| PROJ-023 | POST | /api/v1/projects/{id}/start | 启动项目 |
| PROJ-024 | POST | /api/v1/projects/{id}/pause | 暂停项目 |
| PROJ-025 | POST | /api/v1/projects/{id}/resume | 恢复项目 |
| PROJ-026 | POST | /api/v1/projects/{id}/complete | 完成项目 |

**创建项目接口详细规范**

请求：
```http
POST /api/v1/projects
Authorization: Bearer {token}
Content-Type: application/json

{
  "name": "X波段接收机开发",
  "description": "开发新一代X波段接收机",
  "start_date": "2026-03-01",
  "end_date": "2026-08-31",
  "budget": 100.00,
  "priority": "high"
}
```

响应：
```json
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "draft_id": "DRAFT-001",
    "project_code": "PRJ-2026-001",
    "next_step": 2
  }
}
```

**自动排程接口详细规范**

请求：
```http
POST /api/v1/projects/PRJ-001/schedule
Authorization: Bearer {token}
Content-Type: application/json

{
  "activities": [
    {
      "id": "ACT-001",
      "name": "需求分析",
      "duration": 10,
      "predecessors": [],
      "resources": ["U001"]
    },
    {
      "id": "ACT-002",
      "name": "方案设计",
      "duration": 15,
      "predecessors": ["ACT-001"],
      "dependency_type": "FS",
      "resources": ["U002"]
    }
  ],
  "constraints": {
    "work_hours_per_day": 8,
    "work_days_per_week": 5
  }
}
```

响应：
```json
{
  "code": 200,
  "message": "排程成功",
  "data": {
    "schedule": {
      "start_date": "2026-03-01",
      "end_date": "2026-08-28",
      "duration": 130
    },
    "critical_path": ["ACT-001", "ACT-002", "ACT-005"],
    "activities": [
      {
        "id": "ACT-001",
        "es": "2026-03-01",
        "ef": "2026-03-10",
        "ls": "2026-03-01",
        "lf": "2026-03-10",
        "tf": 0,
        "is_critical": true
      }
    ],
    "resource_load": {
      "U001": [...],
      "U002": [...]
    }
  }
}
```

#### A.4 项目开发接口

| 接口ID | 方法 | 路径 | 描述 |
|--------|------|------|------|
| DEV-001 | GET | /api/v1/projects/{id}/flow | 获取流程视图 |
| DEV-002 | GET | /api/v1/flow-instances/{id} | 获取流程实例 |
| DEV-003 | GET | /api/v1/activities/{id} | 获取活动详情 |
| DEV-004 | POST | /api/v1/activities/{id}/claim | 认领任务 |
| DEV-005 | PUT | /api/v1/activities/{id}/progress | 更新进度 |
| DEV-006 | POST | /api/v1/activities/{id}/complete | 完成任务 |
| DEV-007 | POST | /api/v1/activities/{id}/pause | 暂停任务 |
| DEV-008 | POST | /api/v1/activities/{id}/resume | 恢复任务 |
| DEV-009 | GET | /api/v1/activities/{id}/templates | 获取交付物模板 |
| DEV-010 | POST | /api/v1/activities/{id}/deliverables | 上传交付物 |
| DEV-011 | GET | /api/v1/deliverables/{id} | 获取交付物 |
| DEV-012 | GET | /api/v1/deliverables/{id}/preview | 预览交付物 |
| DEV-013 | GET | /api/v1/deliverables/{id}/versions | 获取版本历史 |
| DEV-014 | POST | /api/v1/projects/{id}/issues | 创建问题 |
| DEV-015 | GET | /api/v1/projects/{id}/issues | 查询问题列表 |
| DEV-016 | GET | /api/v1/issues/{id} | 获取问题详情 |
| DEV-017 | PUT | /api/v1/issues/{id} | 更新问题 |
| DEV-018 | POST | /api/v1/issues/{id}/escalate | 升级问题 |
| DEV-019 | POST | /api/v1/dcp/{id}/review | DCP评审 |
| DEV-020 | GET | /api/v1/projects/{id}/completion-check | 完成条件检查 |

**认领任务接口详细规范**

请求：
```http
POST /api/v1/activities/ACT-001/claim
Authorization: Bearer {token}
Content-Type: application/json

{
  "user_id": "U001"
}
```

响应：
```json
{
  "code": 200,
  "message": "认领成功",
  "data": {
    "activity": {
      "id": "ACT-001",
      "status": "in_progress",
      "assignee": {
        "id": "U001",
        "name": "张三"
      },
      "claimed_at": "2026-03-01T09:00:00Z"
    }
  }
}
```

**完成任务接口详细规范**

请求：
```http
POST /api/v1/activities/ACT-001/complete
Authorization: Bearer {token}
Content-Type: application/json

{
  "progress": 100,
  "deliverables": ["DEL-001", "DEL-002"],
  "notes": "需求分析完成，已提交需求规格说明书"
}
```

响应：
```json
{
  "code": 200,
  "message": "任务完成",
  "data": {
    "activity": {
      "id": "ACT-001",
      "status": "completed",
      "completed_at": "2026-03-10T17:00:00Z"
    },
    "next_activity": {
      "id": "ACT-002",
      "name": "方案设计",
      "status": "ready"
    }
  }
}
```

#### A.5 产品货架接口

| 接口ID | 方法 | 路径 | 描述 |
|--------|------|------|------|
| SHELF-001 | GET | /api/v1/products | 查询产品列表 |
| SHELF-002 | GET | /api/v1/products/{id} | 获取产品详情 |
| SHELF-003 | POST | /api/v1/products | 创建产品 |
| SHELF-004 | PUT | /api/v1/products/{id} | 更新产品 |
| SHELF-005 | DELETE | /api/v1/products/{id} | 删除产品 |
| SHELF-006 | GET | /api/v1/products/{id}/download | 下载产品资料 |
| SHELF-007 | POST | /api/v1/products/{id}/select | 选用产品 |
| SHELF-008 | GET | /api/v1/products/{id}/versions | 获取版本历史 |
| SHELF-009 | POST | /api/v1/products/{id}/fork | 基于产品创建项目 |
| SHELF-010 | GET | /api/v1/product-categories | 获取产品分类 |
| SHELF-011 | GET | /api/v1/product-categories/{id}/products | 获取分类下产品 |

**选用产品接口详细规范**

请求：
```http
POST /api/v1/products/PROD-001/select
Authorization: Bearer {token}
Content-Type: application/json

{
  "project_id": "PRJ-001",
  "quantity": 2,
  "notes": "用于X波段接收机项目"
}
```

响应：
```json
{
  "code": 200,
  "message": "选用申请已提交",
  "data": {
    "selection_id": "SEL-001",
    "status": "pending_approval",
    "approval_flow": [...]
  }
}
```

#### A.6 技术货架接口

| 接口ID | 方法 | 路径 | 描述 |
|--------|------|------|------|
| TECH-001 | GET | /api/v1/technologies | 查询技术列表 |
| TECH-002 | GET | /api/v1/technologies/{id} | 获取技术详情 |
| TECH-003 | POST | /api/v1/technologies | 创建技术条目 |
| TECH-004 | PUT | /api/v1/technologies/{id} | 更新技术信息 |
| TECH-005 | DELETE | /api/v1/technologies/{id} | 删除技术条目 |
| TECH-006 | GET | /api/v1/technology-categories | 获取技术分类 |
| TECH-007 | GET | /api/v1/technology-categories/tree | 获取技术树 |

#### A.7 知识库接口

| 接口ID | 方法 | 路径 | 描述 |
|--------|------|------|------|
| KB-001 | GET | /api/v1/knowledge | 查询知识条目 |
| KB-002 | GET | /api/v1/knowledge/{id} | 获取知识详情 |
| KB-003 | POST | /api/v1/knowledge | 创建知识条目 |
| KB-004 | PUT | /api/v1/knowledge/{id} | 更新知识条目 |
| KB-005 | DELETE | /api/v1/knowledge/{id} | 删除知识条目 |
| KB-006 | GET | /api/v1/knowledge/search | 搜索知识 |
| KB-007 | GET | /api/v1/knowledge/categories | 获取知识分类 |
| KB-008 | POST | /api/v1/knowledge/{id}/attachments | 上传附件 |
| KB-009 | GET | /api/v1/knowledge/obsidian/sync | 同步Obsidian |
| KB-010 | GET | /api/v1/knowledge/zotero/sync | 同步Zotero |

**搜索知识接口详细规范**

请求：
```http
GET /api/v1/knowledge/search?keyword=射频设计&category=理论知识&tags=电路&page=1&page_size=20
Authorization: Bearer {token}
```

响应：
```json
{
  "code": 200,
  "message": "搜索成功",
  "data": {
    "total": 56,
    "page": 1,
    "page_size": 20,
    "items": [
      {
        "id": "KNW-001",
        "title": "射频电路设计指南",
        "category": "理论知识/专业知识",
        "author": "张三",
        "summary": "本文介绍了射频电路设计的基本方法和注意事项...",
        "tags": ["射频", "电路设计"],
        "view_count": 128,
        "created_at": "2025-06-15"
      }
    ]
  }
}
```

#### A.8 论坛接口

| 接口ID | 方法 | 路径 | 描述 |
|--------|------|------|------|
| FORUM-001 | GET | /api/v1/forum/boards | 获取版块列表 |
| FORUM-002 | GET | /api/v1/forum/boards/{id}/topics | 获取主题列表 |
| FORUM-003 | POST | /api/v1/forum/topics | 创建主题 |
| FORUM-004 | GET | /api/v1/forum/topics/{id} | 获取主题详情 |
| FORUM-005 | PUT | /api/v1/forum/topics/{id} | 更新主题 |
| FORUM-006 | DELETE | /api/v1/forum/topics/{id} | 删除主题 |
| FORUM-007 | POST | /api/v1/forum/topics/{id}/replies | 回复主题 |
| FORUM-008 | POST | /api/v1/forum/topics/{id}/like | 点赞主题 |
| FORUM-009 | GET | /api/v1/forum/search | 搜索帖子 |

#### A.9 即时通信接口

| 接口ID | 方法 | 路径 | 描述 |
|--------|------|------|------|
| IM-001 | GET | /api/v1/im/channels | 获取频道列表 |
| IM-002 | POST | /api/v1/im/channels | 创建频道 |
| IM-003 | GET | /api/v1/im/channels/{id} | 获取频道详情 |
| IM-004 | POST | /api/v1/im/channels/{id}/join | 加入频道 |
| IM-005 | POST | /api/v1/im/channels/{id}/leave | 离开频道 |
| IM-006 | GET | /api/v1/im/channels/{id}/messages | 获取消息 |
| IM-007 | POST | /api/v1/im/channels/{id}/messages | 发送消息 |
| IM-008 | WS | /ws/im | WebSocket连接 |
| IM-009 | GET | /api/v1/im/users/{id}/channels | 获取用户频道 |
| IM-010 | POST | /api/v1/im/channels/{id}/read | 标记已读 |

**发送消息接口详细规范**

请求：
```http
POST /api/v1/im/channels/CH-001/messages
Authorization: Bearer {token}
Content-Type: application/json

{
  "type": "text",
  "content": "大家好，项目进度如何？",
  "mentions": ["U002", "U003"]
}
```

响应：
```json
{
  "code": 200,
  "message": "发送成功",
  "data": {
    "message": {
      "id": "MSG-001",
      "channel_id": "CH-001",
      "sender_id": "U001",
      "type": "text",
      "content": "大家好，项目进度如何？",
      "mentions": ["U002", "U003"],
      "created_at": "2026-02-20T10:30:00Z"
    }
  }
}
```

#### A.10 通用接口

| 接口ID | 方法 | 路径 | 描述 |
|--------|------|------|------|
| COMMON-001 | GET | /api/v1/notifications | 获取通知列表 |
| COMMON-002 | PUT | /api/v1/notifications/{id}/read | 标记通知已读 |
| COMMON-003 | PUT | /api/v1/notifications/read-all | 标记全部已读 |
| COMMON-004 | GET | /api/v1/todos | 获取待办事项 |
| COMMON-005 | GET | /api/v1/dashboard | 获取仪表盘数据 |
| COMMON-006 | POST | /api/v1/upload | 文件上传 |
| COMMON-007 | GET | /api/v1/download/{id} | 文件下载 |
| COMMON-008 | GET | /api/v1/system/configs | 获取系统配置 |
| COMMON-009 | GET | /api/v1/logs/operations | 查询操作日志 |

---

### 附录B：错误码定义

#### B.1 通用错误码

| 错误码 | 错误信息 | 说明 |
|--------|----------|------|
| 200 | 成功 | 请求成功 |
| 400 | 请求参数错误 | 参数校验失败 |
| 401 | 未授权 | Token无效或过期 |
| 403 | 禁止访问 | 权限不足 |
| 404 | 资源不存在 | 请求的资源不存在 |
| 405 | 方法不允许 | HTTP方法不支持 |
| 409 | 资源冲突 | 资源已存在或状态冲突 |
| 422 | 业务逻辑错误 | 业务规则校验失败 |
| 429 | 请求过于频繁 | 限流触发 |
| 500 | 服务器内部错误 | 系统异常 |
| 503 | 服务不可用 | 服务暂时不可用 |

#### B.2 业务错误码

| 错误码 | 错误信息 | 说明 |
|--------|----------|------|
| 1001 | 用户名或密码错误 | 登录失败 |
| 1002 | 账号已锁定 | 账号被锁定 |
| 1003 | 验证码错误 | 验证码校验失败 |
| 1004 | 用户名已存在 | 用户已存在 |
| 1005 | 旧密码错误 | 密码修改失败 |
| 2001 | 项目名称已存在 | 项目重名 |
| 2002 | 项目类别无效 | 类别不存在 |
| 2003 | 流程模板无效 | 模板不存在 |
| 2004 | 关键角色缺失 | 团队配置不完整 |
| 2005 | 排程失败 | 自动排程出错 |
| 3001 | 活动状态不允许 | 当前状态无法执行 |
| 3002 | 交付物不完整 | 缺少必要交付物 |
| 3003 | 前置活动未完成 | 依赖未满足 |
| 3004 | DCP评审未通过 | 评审未通过 |
| 4001 | 产品不存在 | 产品未找到 |
| 4002 | 选用审批中 | 选用申请待审批 |
| 5001 | 知识分类不存在 | 分类未找到 |
| 6001 | 频道不存在 | 频道未找到 |
| 6002 | 不是频道成员 | 用户不在频道中 |

---

### 附录C：用户故事

#### C.1 用户管理模块用户故事

**故事1：作为管理员，我需要创建用户账号**
```
角色：系统管理员
功能：创建用户账号
目的：为新入职员工创建系统账号

验收标准：
- 可以输入用户名、姓名、邮箱等基本信息
- 可以分配所属部门和岗位
- 可以设置职称级别
- 系统自动生成初始密码
- 创建成功后发送通知邮件
```

**故事2：作为部门领导，我需要查看团队成员信息**
```
角色：部门领导
功能：查看团队成员列表
目的：了解团队成员构成和分布

验收标准：
- 可以按部门/团队筛选成员
- 可以按岗位筛选成员
- 显示成员基本信息和职称
- 支持点击成员查看详情
```

**故事3：作为设计师，我需要查看个人主页**
```
角色：设计师
功能：查看个人主页
目的：展示个人能力和项目经历

验收标准：
- 显示个人基本信息
- 显示参与的项目列表
- 显示能力雷达图
- 显示近期平台使用记录
- 显示获得的荣誉
```

#### C.2 项目管理模块用户故事

**故事4：作为项目负责人，我需要创建新项目**
```
角色：项目负责人
功能：创建新项目
目的：启动一个新的研发项目

验收标准：
- 通过五步向导完成项目创建
- 可以选择项目类别
- 可以绑定流程模板
- 可以分配团队成员
- 自动生成项目文件夹
- 自动执行排程
```

**故事5：作为项目经理，我需要查看项目进度**
```
角色：项目经理
功能：查看项目仪表盘
目的：了解项目整体进展情况

验收标准：
- 显示项目整体进度
- 显示各阶段进度
- 显示关键路径
- 显示资源负载
- 超期任务有提醒
```

**故事6：作为项目经理，我需要调整项目计划**
```
角色：项目经理
功能：编辑甘特图
目的：根据实际情况调整项目计划

验收标准：
- 支持拖拽调整任务时间
- 支持调整任务依赖关系
- 支持导出MS Project
- 支持导入MS Project
- 调整后自动更新关键路径
```

#### C.3 项目开发模块用户故事

**故事7：作为设计师，我需要认领任务**
```
角色：设计师
功能：认领活动任务
目的：开始执行分配给自己的工作

验收标准：
- 可以看到待认领的任务列表
- 可以查看任务详情和交付物要求
- 可以一键认领任务
- 认领后任务状态更新
```

**故事8：作为设计师，我需要上传交付物**
```
角色：设计师
功能：上传活动交付物
目的：提交工作成果

验收标准：
- 可以查看交付物模板
- 可以上传多种类型文件
- 支持调用本地软件编辑
- 自动触发Git版本控制
- 支持生成Web预览
```

**故事9：作为设计师，我需要反馈问题**
```
角色：设计师
功能：提交问题
目的：反馈工作中遇到的问题

验收标准：
- 可以创建问题并描述详情
- 可以设置问题优先级
- 问题自动通知相关人员
- 支持问题升级
- 可以跟踪问题处理状态
```

#### C.4 产品货架模块用户故事

**故事10：作为设计师，我需要选用产品模块**
```
角色：设计师
功能：从产品货架选用模块
目的：复用已有产品模块

验收标准：
- 可以浏览产品分类
- 可以搜索产品
- 可以查看产品详情
- 可以一键选用产品
- 选用申请进入审批流程
```

**故事11：作为产品负责人，我需要管理产品信息**
```
角色：产品负责人
功能：维护产品信息
目的：保持产品信息准确完整

验收标准：
- 可以编辑产品基本信息
- 可以上传产品图片
- 可以上传技术文档
- 可以记录应用履历
- 可以管理产品版本
```

#### C.5 知识库模块用户故事

**故事12：作为设计师，我需要搜索技术文档**
```
角色：设计师
功能：搜索知识库
目的：查找需要的技术资料

验收标准：
- 支持全文搜索
- 支持分类筛选
- 支持标签筛选
- 搜索结果相关度高
- 支持高亮显示关键词
```

**故事13：作为技术人员，我需要分享知识**
```
角色：技术人员
功能：创建知识条目
目的：分享技术经验和知识

验收标准：
- 可以选择知识分类
- 支持Markdown编辑
- 可以添加标签
- 可以上传附件
- 发布后其他用户可以查看
```

---

### 附录D：业务流程图

#### D.1 五步项目创建流程

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   开始创建   │───▶│ 步骤1:基础信息 │───▶│ 步骤2:类别选择 │
└─────────────┘    └─────────────┘    └─────────────┘
                                              │
┌─────────────┐    ┌─────────────┐    ┌─────▼───────┐
│ 步骤5:确认创建│◀───│ 步骤4:团队分配 │◀───│ 步骤3:流程绑定 │
└──────┬──────┘    └─────────────┘    └─────────────┘
       │
       ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  创建项目记录 │───▶│  初始化流程  │───▶│  执行自动排程 │
└─────────────┘    └─────────────┘    └─────────────┘
                                              │
       ┌──────────────────────────────────────┘
       ▼
┌─────────────┐    ┌─────────────┐
│ 创建项目文件夹│───▶│  发送启动通知 │
└─────────────┘    └─────────────┘
```

#### D.2 任务执行闭环流程

```
┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐
│  待开始  │───▶│  已认领  │───▶│  执行中  │───▶│  待审核  │
└─────────┘    └─────────┘    └─────────┘    └─────┬───┘
     ▲         │    ▲         │    │              │
     │         │    │         │    │              │
     │         └───▶┘         │    │              │
     │                        │    │              │
     │                        ▼    │              ▼
     │                     ┌─────────┐        ┌─────────┐
     │                     │  已暂停  │        │  已完成  │
     │                     └─────────┘        └─────────┘
     │                                            │
     └────────────────────────────────────────────┘
                          (审核退回)
```

#### D.3 问题升级流程

```
┌─────────────────────────────────────────────────────────────┐
│                         问题创建                             │
│  (报告人提交问题，设置优先级和类型)                           │
└─────────────────────┬───────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────┐
│                      L1: 活动负责人                          │
│  (一般技术问题，由活动负责人处理)                             │
│  升级条件: 24小时未解决 或 优先级为高                         │
└─────────────────────┬───────────────────────────────────────┘
                      │ (升级)
                      ▼
┌─────────────────────────────────────────────────────────────┐
│                      L2: 项目负责人                          │
│  (资源冲突、进度风险等问题)                                   │
│  升级条件: 48小时未解决 或 优先级为紧急                       │
└─────────────────────┬───────────────────────────────────────┘
                      │ (升级)
                      ▼
┌─────────────────────────────────────────────────────────────┐
│                    L3: 部门领导/IPMT                         │
│  (重大技术方案变更、方向性决策)                               │
└─────────────────────────────────────────────────────────────┘
```

#### D.4 DCP评审流程

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ DCP活动完成  │───▶│  锁定流程   │───▶│ 汇总评审材料 │
└─────────────┘    └─────────────┘    └─────────────┘
                                              │
                                              ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  执行后续动作 │◀───│  记录评审结论 │◀───│  专家评审会签 │
└─────────────┘    └─────────────┘    └─────────────┘
       │
       ├── Go ─────▶ 解锁流程，继续下一活动
       ├── Kill ───▶ 触发项目终止流程
       ├── Redirect ▶ 返回修改，重新评审
       └── Hold ───▶ 等待条件满足
```

---

### 附录E：界面原型说明

#### E.1 门户首页布局

```
┌─────────────────────────────────────────────────────────────┐
│  Logo    首页    项目    产品    技术    知识    论坛    消息  头像  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                    部门概览                          │   │
│  │  成员数: 45  项目数: 28  产品数: 156  技术数: 45    │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │   我的待办   │  │   最新动态   │  │   快捷入口   │     │
│  │              │  │              │  │              │     │
│  │ • 任务1     │  │ • 通知1     │  │ • 创建项目  │     │
│  │ • 任务2     │  │ • 通知2     │  │ • 上传文档  │     │
│  │ • 任务3     │  │ • 通知3     │  │ • 发起讨论  │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                    工作台                            │   │
│  │  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐  │   │
│  │  │用户 │ │项目 │ │产品 │ │技术 │ │知识 │ │论坛 │  │   │
│  │  │管理 │ │管理 │ │货架 │ │货架 │ │库  │ │    │  │   │
│  │  └─────┘ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘  │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### E.2 项目甘特图界面

```
┌─────────────────────────────────────────────────────────────┐
│  项目名称: X波段接收机开发                    [日] [周] [月] │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  任务列表          │  3月    │  4月    │  5月    │  6月    │
│                    │─────────│─────────│─────────│─────────│
│  ▶ 需求分析        │█████    │         │         │         │
│    方案设计        │    █████│█████    │         │         │
│    详细设计        │         │    █████│█████    │         │
│    硬件开发        │         │         │    █████│█████    │
│    软件开发        │         │         │    █████│█████    │
│    集成测试        │         │         │         │    █████│
│                                                             │
│  关键路径: 需求分析 → 方案设计 → 详细设计 → 硬件开发        │
│                                                             │
│  [导出Project] [导入Project] [重新排程] [关键路径]          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### E.3 流程执行界面

```
┌─────────────────────────────────────────────────────────────┐
│  项目: X波段接收机开发        当前活动: 方案设计              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐  │
│  │需求分析 │───▶│方案设计 │───▶│详细设计 │───▶│硬件开发 │  │
│  │  ✓完成  │    │ ▶进行中 │    │  待开始 │    │  待开始 │  │
│  └─────────┘    └─────────┘    └─────────┘    └─────────┘  │
│                      │                                      │
│                      ▼                                      │
│                 ┌─────────┐                                 │
│                 │方案评审 │ (DCP)                           │
│                 │  待开始 │                                 │
│                 └─────────┘                                 │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  活动详情: 方案设计                                  │   │
│  │  ─────────────────                                   │   │
│  │  执行人: 张三                                       │   │
│  │  计划工期: 15天 (2026-03-11 ~ 2026-03-25)           │   │
│  │  当前进度: 60%                                      │   │
│  │                                                     │   │
│  │  [交付物模板]          [上传交付物]    [完成任务]   │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

### 附录F：技术选型建议

#### F.1 后端技术栈

| 层级 | 技术 | 说明 |
|------|------|------|
| 框架 | Spring Boot 3.x | 主流Java框架 |
| ORM | MyBatis-Plus | 简化数据库操作 |
| 安全 | Spring Security + JWT | 认证授权 |
| 缓存 | Redis | 高性能缓存 |
| 消息 | RabbitMQ | 消息队列 |
| 搜索 | Elasticsearch | 全文搜索 |
| 文件 | MinIO | 对象存储 |
| 文档 | OpenPDF/POI | 文档处理 |

#### F.2 前端技术栈

| 层级 | 技术 | 说明 |
|------|------|------|
| 框架 | Vue 3 + TypeScript | 现代化前端框架 |
| UI库 | Element Plus | 组件库 |
| 状态 | Pinia | 状态管理 |
| 路由 | Vue Router | 路由管理 |
| 图表 | ECharts | 数据可视化 |
| 甘特图 | dhtmlx-gantt | 甘特图组件 |
| 流程图 | @antv/x6 | 流程图绘制 |
| 编辑器 | Monaco Editor | 代码编辑器 |

#### F.3 数据库设计

| 类型 | 技术 | 说明 |
|------|------|------|
| 主数据库 | PostgreSQL 14+ | 关系型数据库 |
| 缓存 | Redis 6.0+ | 缓存和会话 |
| 搜索 | Elasticsearch 8.x | 全文检索 |
| 文件 | 本地/NAS | 文件存储 |

#### F.4 部署架构

```
┌─────────────────────────────────────────────────────────────┐
│                         负载均衡器                           │
│                      (Nginx/HAProxy)                        │
└─────────────────────┬───────────────────────────────────────┘
                      │
        ┌─────────────┼─────────────┐
        │             │             │
        ▼             ▼             ▼
┌───────────┐  ┌───────────┐  ┌───────────┐
│  应用服务器1 │  │  应用服务器2 │  │  应用服务器N │
│  (Docker)  │  │  (Docker)  │  │  (Docker)  │
└───────────┘  └───────────┘  └───────────┘
        │             │             │
        └─────────────┼─────────────┘
                      │
        ┌─────────────┼─────────────┐
        │             │             │
        ▼             ▼             ▼
┌───────────┐  ┌───────────┐  ┌───────────┐
│ PostgreSQL │  │   Redis   │  │Elasticsearch│
│  (主从)    │  │  (集群)   │  │  (集群)    │
└───────────┘  └───────────┘  └───────────┘
```

---

### 附录G：开发计划建议

#### G.1 迭代计划

| 迭代 | 周期 | 目标 |
|------|------|------|
| 迭代1 | 2周 | 基础框架搭建、用户管理模块 |
| 迭代2 | 2周 | 项目管理模块（创建、排程） |
| 迭代3 | 2周 | 项目开发模块（流程执行） |
| 迭代4 | 2周 | 产品货架、技术货架模块 |
| 迭代5 | 2周 | 知识库模块 |
| 迭代6 | 2周 | 技术论坛、即时通信模块 |
| 迭代7 | 2周 | 门户界面、系统集成测试 |
| 迭代8 | 2周 | 性能优化、Bug修复、上线准备 |

#### G.2 模块优先级

| 优先级 | 模块 | 说明 |
|--------|------|------|
| P0 | 用户管理 | 基础功能，必须先完成 |
| P0 | 项目管理 | 核心功能 |
| P0 | 项目开发 | 核心功能 |
| P1 | 产品货架 | 重要功能 |
| P1 | 技术货架 | 重要功能 |
| P1 | 知识库 | 重要功能 |
| P2 | 技术论坛 | 增强功能 |
| P2 | 即时通信 | 增强功能 |
| P2 | 门户界面 | 体验优化 |

---

**文档结束**

*本文档由AI Agent自动生成，供研发团队参考使用。如有疑问，请联系需求分析师。*
