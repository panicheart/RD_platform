# 微波工程部研发管理平台 (RDP) - AI Agent 开发指南

> **文档用途**: 本文档定义AI Agent集群自主开发模式，明确各Agent职责、协作流程及人类监督者的角色
> **最后更新**: 2026-02-21
> **版本**: V2.0（AI Agent集群开发版）

---

## 1. 项目概述

### 1.1 开发模式声明

**本项目采用纯AI Agent集群自主开发模式**：

- **零人工编码**: 所有代码由AI Agent编写，人类仅监督不干预实现细节
- **Subagent并行**: 各功能模块由独立Subagent并行开发，提升效率
- **质量自控**: Agent自我审查+交叉验证，确保代码质量
- **人类监督**: 用户作为"项目所有者"，负责需求确认、方案决策、验收把关

### 1.2 项目简介

**微波工程部研发管理平台** (R&D Platform, 简称 **RDP**) 是为微波系统研发部门设计的企业级综合管理平台。

| 属性 | 内容 |
|------|------|
| **系统名称** | 微波工程部研发管理平台 (RDP) |
| **目标用户** | 微波系统研发部门（约30-100人） |
| **部署环境** | 离线局域网，systemd裸机部署 |
| **开发模式** | AI Agent集群自主开发 |
| **人类角色** | 项目所有者（监督、决策、验收） |
| **文档位置** | `方案/` 目录为项目文档 |

### 1.3 目录结构

```
RD_platform/
├── 原始需求/                    # 原始需求文档（PDF）
│   └── 研发平台需求.pdf
├── 方案/                        # 项目文档
│   ├── README.md                # 文档导航入口
│   ├── 01_需求文档.md
│   ├── 02_详细实施方案.md
│   ├── 03_需求规格说明书.md
│   ├── 技术架构分析报告.md
│   └── pdf-html/                # PDF和HTML版本
├── agents/                      # Agent配置和指令（待创建）
│   ├── instructions/            # 各Agent专项指令
│   └── outputs/                 # Agent交付物
└── AGENTS.md                    # 本文件
```

---

## 2. AI Agent 开发模式详解

### 2.1 核心理念

```
┌─────────────────────────────────────────────────────────────┐
│                      人类监督者（你）                         │
│         需求确认 ← 方案决策 ← 进度监督 ← 验收把关            │
└─────────────────────────┬───────────────────────────────────┘
                          │
          ┌───────────────┼───────────────┐
          ▼               ▼               ▼
┌─────────────┐   ┌─────────────┐   ┌─────────────┐
│  Architect  │   │   PM-Agent  │   │  Reviewer   │
│   Agent     │   │  (项目经理)  │   │   Agent     │
│  (架构师)   │   │             │   │  (审查员)   │
└──────┬──────┘   └──────┬──────┘   └──────┬──────┘
       │                 │                 │
       └─────────────────┼─────────────────┘
                         │
         ┌───────────────┼───────────────┐
         ▼               ▼               ▼
┌─────────────┐   ┌─────────────┐   ┌─────────────┐
│  Feature    │   │  Feature    │   │  Feature    │
│   Agents    │   │   Agents    │   │   Agents    │
│ (功能子代理) │   │ (功能子代理) │   │ (功能子代理) │
└─────────────┘   └─────────────┘   └─────────────┘
```

### 2.2 Agent 角色定义

#### 2.2.1 核心协调层

| Agent角色 | 职责 | 对应人类角色 |
|-----------|------|-------------|
| **Architect Agent** | 架构设计、技术选型、接口定义、代码规范制定 | 技术架构师 |
| **PM-Agent** | 进度协调、依赖管理、冲突解决、资源分配 | 项目经理 |
| **Reviewer Agent** | 代码审查、质量把关、合规检查、测试验证 | 技术负责人 |

#### 2.2.2 功能实现层（Subagent并行开发）

| Subagent名称 | 负责模块 | 核心任务 | 技术栈 |
|-------------|----------|----------|--------|
| **PortalAgent** | 门户界面 | 部门首页、个人工作台、全局搜索 | React + TS + Ant Design |
| **UserAgent** | 用户管理 | 认证授权、RBAC权限、组织架构 | Go + Casdoor/Casbin |
| **ProjectAgent** | 项目管理 | 项目CRUD、Git集成、文件管理 | Go + Gitea API |
| **WorkflowAgent** | 流程引擎 | 流程定义、活动流转、状态机 | Go + BPMN轻量实现 |
| **DevAgent** | 项目开发 | 开发模块、本地软件联动、Git自动提交 | Go + rdp协议 |
| **ShelfAgent** | 产品/技术货架 | 货架服务、选用管理、版本控制 | Go + PostgreSQL |
| **KnowledgeAgent** | 知识库 | 知识服务、Obsidian集成、中文分词 | Go + 文件同步 |
| **SearchAgent** | 搜索服务 | 全文搜索、索引管理 | Go + MeiliSearch |
| **ForumAgent** | 技术论坛 | 论坛服务、帖子管理 | Go + React |
| **InfraAgent** | 基础设施 | 部署脚本、配置管理、数据库设计、Nginx配置 | Shell + systemd |
| **DesktopAgent** | 桌面辅助程序 | rdp协议注册、Git自动提交、冲突处理 | Tauri |
| **AnalyticsAgent** | 数据分析 | 仪表盘、报表服务 | Go + ECharts |
| **SecurityAgent** | 安全合规 | 数据分级、导出审批、屏幕水印、会话控制、审计日志 | Go + 安全策略引擎 |
| **MonitorAgent** | 运维监控 | 系统监控、APM性能监控、日志集中、告警机制 | Go + Prometheus/Grafana |
| **QMAgent** | 质量管理 | 需求管理、变更管理(ECO/ECR)、缺陷管理、测试管理 | Go + 工作流引擎 |

### 2.3 人类监督者（你）的角色

| 职责 | 说明 | 介入时机 |
|------|------|----------|
| **需求确认** | 确认功能需求、边界条件、验收标准 | 每个Phase开始前 |
| **方案决策** | 在多个技术方案中选择、批准架构变更 | Architect Agent提出方案后 |
| **进度监督** | 查看开发进度、了解阻塞问题 | PM-Agent定期汇报时 |
| **验收把关** | 验收各Phase交付物、决定是否进入下一阶段 | 每个Phase结束时 |
| **冲突仲裁** | 当Agent之间无法达成一致时，做最终决策 | 争议发生时 |

**你不需要做的事情**：
- ❌ 编写具体代码
- ❌ 调试程序错误
- ❌ 设计数据库表结构
- ❌ 配置CI/CD流程

---

## 3. Subagent 开发工作流

### 3.1 标准开发流程

```
Phase X 开始
    │
    ▼
┌─────────────────┐
│ 1. 任务分解     │ ← PM-Agent将Phase目标分解为具体任务
│    (PM-Agent)   │    输出：任务清单、依赖关系、优先级
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ 2. 方案设计     │ ← Architect Agent设计技术方案
│ (Architect)     │    输出：接口定义、数据模型、编码规范
└────────┬────────┘
         │
         ▼
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│ 3. 并行开发     │     │ 3. 并行开发     │     │ 3. 并行开发     │
│   (Agent A)     │     │   (Agent B)     │     │   (Agent C)     │
│  独立子任务     │     │  独立子任务     │     │  独立子任务     │
└────────┬────────┘     └────────┬────────┘     └────────┬────────┘
         │                       │                       │
         └───────────────────────┼───────────────────────┘
                                 ▼
┌─────────────────┐
│ 4. 自审查       │ ← 各Agent自我检查代码质量
│ (Self-Review)   │    输出：自检查报告、修复记录
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ 5. 交叉审查     │ ← Reviewer Agent审查各模块
│   (Reviewer)    │    输出：审查意见、修改建议
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ 6. 集成测试     │ ← PM-Agent组织集成验证
│   (PM-Agent)    │    输出：测试报告、问题清单
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ 7. 人类验收     │ ← 你审查交付物，确认或打回
│   (人类监督者)   │    输出：验收意见、改进建议
└────────┬────────┘
         │
         ▼
    ┌────┴────┐
    ▼         ▼
 通过        不通过
  │            │
  ▼            ▼
下一阶段    返回修改
```

### 3.2 Subagent 指令模板

每个Subagent启动时，接收以下标准指令：

```yaml
# Subagent 启动指令模板
agent_role: "FeatureAgent"        # Agent角色
module_name: "User Management"    # 负责模块
tech_stack:                       # 技术栈约束
  frontend: "React + TypeScript + Ant Design"
  backend: "Go + Gin"
  database: "PostgreSQL"
constraints:                      # 约束条件
  - "纯Go后端，禁止引入Node.js"
  - "单体前端架构，非微前端"
  - "systemd裸机部署，无Docker"
  - "代码注释使用英文，UI使用中文"
deliverables:                     # 交付物清单
  - "源代码（完整可编译）"
  - "API接口文档"
  - "单元测试（覆盖率≥60%）"
  - "部署配置"
reviewer: "Reviewer Agent"        # 审查Agent
```

### 3.3 并行开发策略

**无依赖模块 → 完全并行**
```
PortalAgent ──────────────────────── 完成
UserAgent   ──────────────────────── 完成
ProjectAgent ─────────────────────── 完成
（三者互无依赖，可同时启动）
```

**有依赖模块 → 分层并行**
```
Layer 1: WorkflowAgent ───┐
                          ├──→ DevAgent ───→ 完成
Layer 2: ProjectAgent ────┘

（DevAgent依赖Workflow和Project，需等Layer 1完成）
```

---

## 4. 质量保证机制

### 4.1 三级审查体系

| 级别 | 执行者 | 审查内容 | 输出 |
|------|--------|----------|------|
| **L1 - 自审查** | 开发Agent自身 | 代码规范、语法错误、基础逻辑 | 自检查清单 |
| **L2 - 交叉审查** | Reviewer Agent | 架构合规、接口一致、安全漏洞 | 审查报告 |
| **L3 - 集成验证** | PM-Agent | 模块协作、端到端流程、性能基准 | 测试报告 |
| **L4 - 人类验收** | 你（监督者） | 功能完整性、用户体验、业务符合度 | 验收意见 |

### 4.2 代码规范自动检查

Reviewer Agent自动检查项：

```go
// 示例：自动检查规则
rules := []CheckRule{
    {Name: "API路径规范", Pattern: `^/api/v1/[a-z-]+$`, Severity: "error"},
    {Name: "错误码规范", Pattern: `^[456]\d{3}$`, Severity: "error"},
    {Name: "注释语言", Pattern: `^[a-zA-Z]`, Severity: "warning"},
    {Name: "函数长度", MaxLines: 50, Severity: "warning"},
    {Name: "测试覆盖率", MinCoverage: 60, Severity: "error"},
}
```

### 4.3 冲突解决机制

当多个Agent出现分歧时：

```
Agent A vs Agent B 意见不一致
            │
            ▼
    ┌───────────────┐
    │  Architect    │ ← 首先尝试架构师Agent裁决
    │   Agent调解   │
    └───────┬───────┘
            │
      ┌─────┴─────┐
      ▼           ▼
   调解成功    调解失败
      │           │
      ▼           ▼
   按方案执行   上报人类监督者
               （你做出最终决策）
```

---

## 5. 技术栈

### 5.1 核心技术约束

| 层次 | 技术 | 版本 | 约束 |
|------|------|------|------|
| **前端框架** | React + TypeScript + Vite | React 18.x, TS 5.x, Vite 5.x | [MUST] 单体应用，非微前端 |
| **UI库** | Ant Design | 5.x | [MUST] 主UI库 |
| **后端API** | Go (Gin framework) | Go 1.22+, Gin 1.9+ | [MUST] 纯 Go 技术栈 |
| **数据库** | PostgreSQL | 16.x | [MUST] 系统包安装 |
| **缓存** | Redis | 7.x | [SHOULD] Phase 2 |
| **搜索** | PostgreSQL全文搜索(早期) / MeiliSearch(后期) | MeiliSearch 1.x | [MUST] P1用PG, P3用Meili |
| **Git服务** | Gitea | 1.22+ | [MUST] Phase 2 |
| **认证** | Casdoor | Latest | [MUST] Phase 1 |
| **IM** | 内置通知(早期) / Mattermost(后期) | Team Edition | [SHOULD] P1内置, P3外接 |
| **存储** | 本地文件系统 | — | [MUST] |
| **服务管理** | systemd | — | [MUST] 裸机部署 |

### 5.2 编码规范（Agent必须遵守）

| 规范项 | 要求 |
|--------|------|
| **语言** | [MUST] 代码注释和变量名使用英文；UI文案使用中文（i18n机制） |
| **API风格** | [MUST] RESTful API；路径小写+连字符；版本前缀 `/api/v1/` |
| **错误处理** | [MUST] 统一错误响应格式 `{"code": int, "message": string, "data": null}` |
| **认证方式** | [MUST] JWT Bearer Token；Access Token有效期2小时；Refresh Token 7天 |
| **分页** | [MUST] 统一分页参数 `?page=1&page_size=20`；响应含 total, page, page_size |
| **时间格式** | [MUST] ISO 8601（UTC）：`2026-02-20T13:00:00Z` |
| **ID生成** | [MUST] 雪花算法或ULID，不使用自增ID |

---

## 6. 四期开发路线图（AI Agent模式）

### 6.1 实施计划

| 阶段 | 执行Agent | 核心任务 | 交付物 | 里程碑 |
|------|----------|----------|--------|--------|
| **一期：基础骨架** | PortalAgent<br>UserAgent<br>ProjectAgent<br>SecurityAgent<br>InfraAgent | 单体前端、用户管理(Casdoor)、项目管理基础(CRUD+文件管理)、安全合规(数据分级/审计日志)、内置通知、systemd部署 | 可登录使用的基础平台，支持项目创建和文件上传下载 | 可登录使用的基础平台 |
| **二期：核心业务** | WorkflowAgent<br>DevAgent<br>ShelfAgent<br>DesktopAgent<br>QMAgent | 流程引擎(状态机)、项目开发模块、甘特图、产品/技术货架、质量管理(ECR/缺陷/门禁)、Gitea集成、本地软件联动 | 完整研发管理流程上线，支持流程执行和Git版本管理 | 研发流程上线 |
| **三期：知识智能** | KnowledgeAgent<br>SearchAgent<br>ForumAgent | 知识库模块、Obsidian/Zotero集成、全文搜索(MeiliSearch)、技术论坛、Mattermost集成(可选) | 知识管理体系上线，支持知识沉淀和全文搜索 | 知识管理上线 |
| **四期：优化完善** | AnalyticsAgent<br>MonitorAgent<br>各Feature Agents | 数据分析仪表盘、运维监控(APM/日志/告警)、流程优化、性能调优、用户体验提升 | 全功能稳定版本 | 全功能稳定版本 |

### 6.2 每阶段人类监督点

```
Phase X 启动前
    │
    ├──→ 你确认阶段目标和范围
    │
    ▼
Phase X 进行中
    │
    ├──→ PM-Agent定期汇报进度（每完成20%汇报一次）
    ├──→ 你随时可查看进度，提出疑问
    │
    ▼
Phase X 结束时
    │
    ├──→ Reviewer Agent提交质量报告
    ├──→ PM-Agent提交集成测试报告
    ├──→ 你审查交付物，确认或要求修改
    │
    ▼
决策点：进入下一阶段 / 返回修改
```

---

## 7. 关键术语

| 术语 | 定义 |
|------|------|
| **IPD** | 集成产品开发（Integrated Product Development） |
| **DCP** | 决策检查点（Decision Check Point） |
| **L1-L4流程** | 流程分级，L1为最高层级，L4为具体活动层级 |
| **单机** | 独立完整的产品单元 |
| **模块** | 可复用的功能组件 |
| **货架** | 已成熟可复用的产品/技术展示平台 |
| **TRL** | 技术成熟度等级（Technology Readiness Level）1-9级 |
| **交付物** | 项目活动中产生的文档、图纸、代码等成果 |
| **活动** | 流程中的最小执行单元 |
| **Agent** | AI代理，负责特定模块的自主开发 |
| **Subagent** | 子代理，执行具体开发任务 |
| **人类监督者** | 你，项目的最终决策者和验收者 |

---

## 8. 参考资源

### 8.1 开源集成项目

| 项目 | 用途 | GitHub |
|------|------|--------|
| Casdoor | 统一认证/RBAC | https://github.com/casdoor/casdoor |
| Casbin | 权限管理 | https://github.com/casbin/casbin |
| Gitea | Git版本管理 | https://github.com/go-gitea/gitea |
| Mattermost | 即时通讯 | https://github.com/mattermost/mattermost |
| MeiliSearch | 全文搜索 | https://github.com/meilisearch/meilisearch |

### 8.2 内部文档导航

| 文档 | 路径 | 说明 |
|------|------|------|
| 需求文档 | `方案/01_需求文档.md` | 需求分析、功能清单、验收标准 |
| 详细实施方案 | `方案/02_详细实施方案.md` | 架构设计、技术选型、实施计划 |
| 需求规格说明书 | `方案/03_需求规格说明书.md` | 功能规格、接口定义、质量要求 |
| 技术架构分析 | `方案/技术架构分析报告.md` | 技术分析、架构设计 |

---

## 9. 快速开始（人类监督者指南）

### 9.1 如何启动开发

1. **确认Phase 1范围**
   ```
   你 → 确认"基础骨架"阶段的功能边界
   ```

2. **启动Agent集群**
   ```
   PM-Agent → 分解任务
   Architect Agent → 设计Phase 1架构
   Portal/User/Project/Infra Agents → 并行开发
   ```

3. **监督开发过程**
   ```
   你 ← 接收进度汇报
   你 → 提出问题或调整需求
   ```

4. **验收Phase 1**
   ```
   你 ← 审查交付物
   你 → 确认通过 / 要求修改
   ```

### 9.2 常用决策场景

| 场景 | 你的决策 |
|------|----------|
| Agent提出技术方案选择 | 选择A或B，或要求提供更多信息 |
| Agent报告进度滞后 | 调整范围、增加资源或接受延期 |
| Agent发现需求不明确 | 澄清需求或调整功能边界 |
| 验收时发现不符合预期 | 要求修改、调整验收标准或接受现状 |

---

*微波研发部门研发管理平台 — AI Agent开发指南 V2.0*  
*© 2026 微波研发部门 | 内部文档*
